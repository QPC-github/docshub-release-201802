
<!DOCTYPE HTML>

<html lang="en">

<head>
  <meta charset="utf-8">
  <title>EventTarget.addEventListener - DOM - W3cubDocs</title>
  
  <meta name="description" content="The EventTarget.addEventListener() method adds the specified EventListener-compatible object to the list of event listeners for the specified event &hellip;">
  <meta name="keywords" content="eventtarget, addeventlistener, -, dom">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="http://docs.w3cub.com/dom/eventtarget/addeventlistener/">
  <link href="/favicon.png" rel="icon">
  <link type="text/css" rel="stylesheet" href="/assets/application-e0f881b0fce8cbe96f33dadc355b7159d5d2912911231446d60eb8f9caffa802.css">
  <script type="text/javascript" src="/assets/application-8fc46316434047265cd383f02b8e7f434ed7dec4a59f920dd633deef8d488d1b.js"></script>
  <script src="/json/dom.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body>
	<div class="_app">
	<header class="_header">
  
  <form class="_search">
    <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
    <a class="_search-clear"></a>
    <div class="_search-tag"></div>
  </form>
  
  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/dom/" class="_nav-link" title="" style="margin-left:0;">DOM</a></span>
  
  <nav class="_nav">
    <a href="/app/" class="_nav-link ">App</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		<div class="_list">
			
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<div class="_page _mdn">
				
<h1>EventTarget.addEventListener</h1> <p>The <code><strong>EventTarget.addEventListener()</strong></code> method adds the specified <a href="../../eventlistener/"><code>EventListener</code></a>-compatible object to the list of event listeners for the specified event type on the <a href="../../eventtarget/"><code>EventTarget</code></a> on which it is called. The event target may be an <a href="../../element/"><code>Element</code></a> in a document, the <a href="../../document/"><code>Document</code></a> itself, a <a href="../../window/"><code>Window</code></a>, or any other object that supports events (such as <code><a href="../../xmlhttprequest/">XMLHttpRequest</a></code>).</p> <pre class="syntaxbox"><em>target</em>.addEventListener(<em>type</em>, <em>listener[</em>, <em>options</em>]);
<em>target</em>.addEventListener(<em>type</em>, <em>listener[</em>, <em>useCapture</em>]);
<em>target</em>.addEventListener(<em>type</em>, <em>listener[</em>, <em>useCapture</em>, <em>wantsUntrusted </em>]); // Gecko/Mozilla only</pre> <h2 id="Syntax">Syntax</h2> <h3 id="Parameters">Parameters</h3> <dl> <dt><code>type</code></dt> <dd>A case-sensitive string representing the <a href="https://developer.mozilla.org/en-US/docs/Web/Events" target="_blank">event type</a> to listen for.</dd> <dt><code>listener</code></dt> <dd>The object which receives a notification (an object that implements the <a href="../../event/"><code>Event</code></a> interface) when an event of the specified type occurs. This must be an object implementing the <a href="../../eventlistener/"><code>EventListener</code></a> interface, or a JavaScript <a href="https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Functions" target="_blank">function</a>.</dd> <dt>
<code>options</code> <span class="inlineIndicator optional optionalInline">Optional</span>
</dt> <dd>An options object that specifies characteristics about the event listener. The available options are: <ul> <li>
<code>capture</code>: A <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean" target="_blank"><code>Boolean</code></a> indicating that events of this type will be dispatched to the registered <code>listener</code> before being dispatched to any <code>EventTarget</code> beneath it in the DOM tree. </li> <li>
<code>once</code>: A <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean" target="_blank"><code>Boolean</code></a> indicating that the <code>listener</code> should be invoked at most once after being added. If <code>true</code>, the <code>listener</code> would be automatically removed when invoked.</li> <li>
<code>passive</code>: A <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean" target="_blank"><code>Boolean</code></a> indicating that the <code>listener</code> will never call <code>preventDefault()</code>. If it does, the user agent should ignore it and generate a console warning. See <a href="#Improving_scrolling_performance_with_passive_listeners">Improving scrolling performance with passive listeners</a> to learn more.</li> <li>
<code> mozSystemGroup</code>: A <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean" target="_blank"><code>Boolean</code></a> indicating that the listener should be added to the system group. Available only in code running in XBL or in Firefox's chrome.</li> </ul> </dd> <dt>
<code>useCapture</code> <span class="inlineIndicator optional optionalInline">Optional</span>
</dt> <dd>A <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean" target="_blank"><code>Boolean</code></a> indicating whether events of this type will be dispatched to the registered <code>listener</code> <em>before</em> being dispatched to any <code>EventTarget</code> beneath it in the DOM tree. Events that are bubbling upward through the tree will not trigger a listener designated to use capture. Event bubbling and capturing are two ways of propagating events which occur in an element that is nested within another element, when both elements have registered a handle for that event. The event propagation mode determines the order in which elements receive the event. See <a href="http://www.w3.org/TR/DOM-Level-3-Events/#event-flow" target="_blank">DOM Level 3 Events</a> and <a href="http://www.quirksmode.org/js/events_order.html#link4" target="_blank">JavaScript Event order</a> for a detailed explanation. If not specified, <code>useCapture</code> defaults to <code>false</code>.</dd> <dd> <div class="note">
<strong>Note:</strong> For event listeners attached to the event target, the event is in the target phase, rather than the capturing and bubbling phases. Events in the target phase will trigger all listeners on an element in the order they were registered, regardless of the <code>useCapture</code> parameter.</div> <div class="note">
<strong>Note:</strong> <code>useCapture</code> has not always been optional. Ideally, you should include it for the widest possible browser compatibility.</div> </dd> <dt>
<code>wantsUntrusted</code> 
</dt> <dd>A Firefox (Gecko)-specific parameter. If <code>true</code>, the listener receives synthetic events dispatched by web content (the default is <code>false</code> for chrome and <code>true</code> for regular web pages). This parameter is useful for code found in add-ons as well as the browser itself. See <a href="https://developer.mozilla.org/en-US/docs/Code_snippets/Interaction_between_privileged_and_non-privileged_pages" target="_blank">Interaction between privileged and non-privileged pages</a> for an example.</dd> </dl> <p>Before using a particular value in the <code>options</code> object, it's a good idea to ensure that the user's browser supports it, since these are an addition that not all browsers have supported historically. See <a href="#Safely_detecting_option_support">Safely detecting option support</a> for details.</p> <h3 id="Return_value">Return value</h3> <p><code>undefined</code>.</p> <h3 id="Safely_detecting_option_support">Safely detecting option support</h3> <p>In older versions of the DOM specification, the third parameter of <code>addEventListener()</code> was a Boolean value indicating whether or not to use capture. Over time, it became clear that more options were needed. Rather than adding more parameters to the function (complicating things enormously when dealing with optional values), the third parameter was changed to an object which can contain various properties defining the values of options to configure the process of removing the event listener.</p> <p>Because older browsers (as well as some not-too-old browsers) still assume the third parameter is a Boolean, you need to build your code to handle this scenario intelligently. You can do this by using feature detection for each of the options you're interested in.</p> <p>For example, if you want to check for the <code>passive</code> option:</p> <pre data-language="js">var passiveSupported = false;

try {
  var options = Object.defineProperty({}, "passive", {
    get: function() {
      passiveSupported = true;
    }
  });

  window.addEventListener("test", options, options);
  window.removeEventListener("test", options, options);
} catch(err) {
  passiveSupported = false;
}
</pre> <p>This creates an <code>options</code> object with a getter function for the <code>passive</code> property; the getter sets a flag, <code>passiveSupported</code>, to <code>true</code> if it gets called. That means that if the browser checks the value of the <code>passive</code> property on the <code>options</code> object, <code>passiveSupported</code> will be set to <code>true</code>; otherwise, it will remain <code>false</code>. We then call <code>addEventListener()</code> to set up a fake event handler, specifying those options, so that the options will be checked if the browser recognizes an object as the third parameter. Then, we call <code>removeEventListener()</code> to clean up after ourselves. (Note that <code>handleEvent()</code> is ignored on event listeners that aren't called.)</p> <p>You can check whether any option is supported this way. Just add a getter for that option using code similar to what is shown above.</p> <p>Then, when you want to create an actual event listener that uses the options in question, you can do something like this:</p> <pre data-language="js">someElement.addEventListener("mouseup", handleMouseUp, passiveSupported
                               ? { passive: true } : false);</pre> <p>Here we're adding a listener for the <code><a href="https://developer.mozilla.org/en-US/docs/Web/Events/mouseup" target="_blank">mouseup</a></code> event on the element <code>someElement</code>. For the third parameter, if <code>passiveSupported</code> is <code>true</code>, we're specifying an <code>options</code> object with <code>passive</code> set to <code>true</code>; otherwise, we know that we need to pass a Boolean, and we pass <code>false</code> as the value of the <code>useCapture</code> parameter.</p> <p>If you'd prefer, you can use a third-party library like <a href="https://modernizr.com/docs" target="_blank">Modernizr</a> or <a href="https://github.com/rafrex/detect-it" target="_blank">Detect It</a> to do this test for you.</p> <p>You can learn more from the article about <code><a href="https://github.com/WICG/EventListenerOptions/blob/gh-pages/explainer.md#feature-detection" target="_blank">EventListenerOptions</a></code> from the <a href="https://wicg.github.io/admin/charter.html" target="_blank">Web Incubator Community Group</a>.</p> <h2 id="Example">Example</h2> <h3 id="Add_a_simple_listener">Add a simple listener</h3> <h4 id="HTML">HTML</h4> <pre data-language="html">&lt;table id="outside"&gt;
    &lt;tr&gt;&lt;td id="t1"&gt;one&lt;/td&gt;&lt;/tr&gt;
    &lt;tr&gt;&lt;td id="t2"&gt;two&lt;/td&gt;&lt;/tr&gt;
&lt;/table&gt;
</pre> <h4 id="JavaScript">JavaScript</h4> <pre data-language="js">// Function to change the content of t2
function modifyText() {
  var t2 = document.getElementById("t2");
  if (t2.firstChild.nodeValue == "three") {
    t2.firstChild.nodeValue = "two";
  } else {
    t2.firstChild.nodeValue = "three";
  }
}

// add event listener to table
var el = document.getElementById("outside");
el.addEventListener("click", modifyText, false);
</pre> <p><iframe src="https://mdn.mozillademos.org/en-US/docs/Web/API/EventTarget/addEventListener%24samples/Add_a_simple_listener?revision=1346125" id="frame_Add_a_simple_listener" class="live-sample-frame sample-code-frame" frameborder="0"></iframe></p> <p>In the above example, <code>modifyText()</code> is a listener for <code>click</code> events registered using <code>addEventListener()</code>. A click anywhere in the table bubbles up to the handler and runs <code>modifyText()</code>.</p> <p>If you want to pass parameters to the listener function, you may use an anonymous function.</p> <h3 id="Event_listener_with_anonymous_function">Event listener with anonymous function</h3> <h4 id="HTML_2">HTML</h4> <pre data-language="html">&lt;table id="outside"&gt;
    &lt;tr&gt;&lt;td id="t1"&gt;one&lt;/td&gt;&lt;/tr&gt;
    &lt;tr&gt;&lt;td id="t2"&gt;two&lt;/td&gt;&lt;/tr&gt;
&lt;/table&gt;</pre> <h4 id="JavaScript_2">JavaScript</h4> <pre data-language="js">// Function to change the content of t2
function modifyText(new_text) {
  var t2 = document.getElementById("t2");
  t2.firstChild.nodeValue = new_text;    
}
 
// Function to add event listener to table
var el = document.getElementById("outside");
el.addEventListener("click", function(){modifyText("four")}, false);
</pre> <p><iframe src="https://mdn.mozillademos.org/en-US/docs/Web/API/EventTarget/addEventListener%24samples/Event_listener_with_anonymous_function?revision=1346125" id="frame_Event_listener_with_anonymous_function" class="live-sample-frame sample-code-frame" frameborder="0"></iframe></p> <h3 id="Event_listener_with_an_arrow_function">Event listener with an arrow function</h3> <h4 id="HTML_3">HTML</h4> <pre data-language="html">&lt;table id="outside"&gt;
    &lt;tr&gt;&lt;td id="t1"&gt;one&lt;/td&gt;&lt;/tr&gt;
    &lt;tr&gt;&lt;td id="t2"&gt;two&lt;/td&gt;&lt;/tr&gt;
&lt;/table&gt;</pre> <h4 id="JavaScript_3">JavaScript</h4> <pre data-language="js">// Function to change the content of t2
function modifyText(new_text) {
  var t2 = document.getElementById("t2");
  t2.firstChild.nodeValue = new_text;    
}
 
// Add event listener to table with an arrow function
var el = document.getElementById("outside");
el.addEventListener("click", () =&gt; { modifyText("four"); }, false);
</pre> <p><iframe src="https://mdn.mozillademos.org/en-US/docs/Web/API/EventTarget/addEventListener%24samples/Event_listener_with_an_arrow_function?revision=1346125" id="frame_Event_listener_with_an_arrow_function" class="live-sample-frame sample-code-frame" frameborder="0"></iframe></p> <p>Please note that while anonymous and arrow functions are similar, they have different <code>this</code> bindings.</p> <h2 id="Notes">Notes</h2> <h3 id="Why_use_addEventListener">Why use <code>addEventListener</code>?</h3> <p><code>addEventListener</code> is the way to register an event listener as specified in W3C DOM. The benefits are as follows:</p> <ul> <li>It allows adding more than a single handler for an event. This is particularly useful for <a href="https://developer.mozilla.org/en-US/docs/DHTML" target="_blank">DHTML</a> libraries or <a href="https://developer.mozilla.org/en-US/docs/Extensions" target="_blank">Mozilla extensions</a> that need to work well with other libraries/extensions.</li> <li>It gives you finer-grained control of the phase when the listener is activated (capturing vs. bubbling).</li> <li>It works on any DOM element, not just HTML elements.</li> </ul> <p>The alternative, <a href="#Older_way_to_register_event_listeners">older way to register event listeners</a>, is described below.</p> <h3 id="Adding_a_listener_during_event_dispatch">Adding a listener during event dispatch</h3> <p>If an <code>EventListener</code> is added to an <code>EventTarget</code> while it is processing an event, that event does not trigger the listener. However, that same listener may be triggered during a later stage of event flow, such as the bubbling phase.</p> <h3 id="Multiple_identical_event_listeners">Multiple identical event listeners</h3> <p>If multiple identical <code>EventListener</code>s are registered on the same <code>EventTarget</code> with the same parameters, the duplicate instances are discarded. They do not cause the <code>EventListener</code> to be called twice, and they do not need to be removed manually with the <a href="../removeeventlistener/">removeEventListener</a> method.</p> <h3 id="The_value_of_this_within_the_handler">The value of <code>this</code> within the handler</h3> <p>It is often desirable to reference the element on which the event handler was fired, such as when using a generic handler for a set of similar elements.</p> <p>If attaching a handler function to an element using <code>addEventListener()</code>, the value of <code>this</code> inside the handler is a reference to the element. It is the same as the value of the <code>currentTarget</code> property of the event argument that is passed to the handler.</p> <p>If an event attribute (for example, <code>onclick</code>) is specified on an element in the HTML source, the JavaScript code in the attribute value is effectively wrapped in a handler function which binds the value of <code>this</code> in a manner consistent with the <code>addEventListener()</code>; an occurrence of <code>this</code> within the code represents a reference to the element. Note that the value of <code>this</code> inside a function, <em>called by </em>the code in the attribute value, behaves as per <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/this" target="_blank">standard rules</a>. This is shown in the following example:</p> <pre data-language="html">&lt;table id="t" onclick="modifyText();"&gt;
  . . .
</pre> <p>The value of <code>this</code> within <code>modifyText()</code> is a reference to the global object <a href="../../window/"><code>Window</code></a> (or <code>undefined</code> in the case of <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Strict_mode" target="_blank">strict mode</a>).</p> <div class="note">
<strong>Note:</strong> JavaScript 1.8.5 introduces the <code><a href="https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/bind" target="_blank">Function.prototype.bind()</a></code> method, which lets you specify the value that should be used as <code>this</code> for all calls to a given function. This method lets you easily bypass problems where it's unclear what this will be, depending on the context from which your function was called. Note, however, that you'll need to keep a reference to the listener around so you can remove it later.</div> <p>This is an example with and without <code>bind</code>:</p> <pre data-language="js">var Something = function(element) {
  // |this| is a newly created object
  this.name = 'Something Good';
  this.onclick1 = function(event) {
    console.log(this.name); // undefined, as |this| is the element
  };
  this.onclick2 = function(event) {
    console.log(this.name); // 'Something Good', as |this| is bound to newly created object
  };
  element.addEventListener('click', this.onclick1, false);
  element.addEventListener('click', this.onclick2.bind(this), false); // Trick
}
var s = new Something(document.body);
</pre> <p>A problem in the example above is that you cannot remove the listener with <code>bind</code>. Another solution is using a special function called <code>handleEvent</code> to catch any events:</p> <pre data-language="js">var Something = function(element) {
  // |this| is a newly created object
  this.name = 'Something Good';
  this.handleEvent = function(event) {
    console.log(this.name); // 'Something Good', as this is bound to newly created object
    switch(event.type) {
      case 'click':
        // some code here...
        break;
      case 'dblclick':
        // some code here...
        break;
    }
  };

  // Note that the listeners in this case are |this|, not this.handleEvent
  element.addEventListener('click', this, false);
  element.addEventListener('dblclick', this, false);

  // You can properly remove the listeners
  element.removeEventListener('click', this, false);
  element.removeEventListener('dblclick', this, false);
}
var s = new Something(document.body);
</pre> <p>Another way of handling the reference to <em>this </em>is to pass to the EventListener a function that calls the method of the object which contains the fields that need to be accessed:</p> <pre data-language="js">class SomeClass {

  constructor() {
    this.name = 'Something Good';
  }

  register() {
    var that = this;
    window.addEventListener('keydown', function(e) {return that.someMethod(e);});
  }

  someMethod(e) {
    console.log(this.name);
    switch(e.keyCode) {
      case 5:
        // some code here...
        break;
      case 6:
        // some code here...
        break;
    }
  }

}

var myObject = new SomeClass();
myObject.register();</pre> <h3 id="Legacy_Internet_Explorer_and_attachEvent">Legacy Internet Explorer and attachEvent</h3> <p>In Internet Explorer versions before IE 9, you have to use <code><a href="http://msdn.microsoft.com/en-us/library/ms536343(VS.85).aspx" target="_blank">attachEvent</a></code>, rather than the standard <code>addEventListener</code>. For IE, we modify the preceding example to:</p> <pre data-language="js">if (el.addEventListener) {
  el.addEventListener('click', modifyText, false); 
} else if (el.attachEvent)  {
  el.attachEvent('onclick', modifyText);
}
</pre> <p>There is a drawback to <code>attachEvent:</code> The value of <code>this</code> will be a reference to the <code>window</code> object, instead of the element on which it was fired.</p> <h3 id="Compatibility">Compatibility</h3> <p>You can work around <code>addEventListener()</code>, <code>removeEventListener()</code>, <code>Event.preventDefault(),</code> and <code>Event.stopPropagation()</code> not being supported by IE 8 by using the following code at the beginning of your script. The code supports the use of <code>handleEvent</code> and also the <code>DOMContentLoaded</code> event.</p> <div class="note"> <p><strong>Note: </strong>useCapture is not supported, as IE 8 does not have any alternative method. The following code only adds IE 8 support. This IE 8 polyfill only works in standards mode: a doctype declaration is required.</p> </div> <pre data-language="js">(function() {
  if (!Event.prototype.preventDefault) {
    Event.prototype.preventDefault=function() {
      this.returnValue=false;
    };
  }
  if (!Event.prototype.stopPropagation) {
    Event.prototype.stopPropagation=function() {
      this.cancelBubble=true;
    };
  }
  if (!Element.prototype.addEventListener) {
    var eventListeners=[];
    
    var addEventListener=function(type,listener /*, useCapture (will be ignored) */) {
      var self=this;
      var wrapper=function(e) {
        e.target=e.srcElement;
        e.currentTarget=self;
        if (typeof listener.handleEvent != 'undefined') {
          listener.handleEvent(e);
        } else {
          listener.call(self,e);
        }
      };
      if (type=="DOMContentLoaded") {
        var wrapper2=function(e) {
          if (document.readyState=="complete") {
            wrapper(e);
          }
        };
        document.attachEvent("onreadystatechange",wrapper2);
        eventListeners.push({object:this,type:type,listener:listener,wrapper:wrapper2});
        
        if (document.readyState=="complete") {
          var e=new Event();
          e.srcElement=window;
          wrapper2(e);
        }
      } else {
        this.attachEvent("on"+type,wrapper);
        eventListeners.push({object:this,type:type,listener:listener,wrapper:wrapper});
      }
    };
    var removeEventListener=function(type,listener /*, useCapture (will be ignored) */) {
      var counter=0;
      while (counter&lt;eventListeners.length) {
        var eventListener=eventListeners[counter];
        if (eventListener.object==this &amp;&amp; eventListener.type==type &amp;&amp; eventListener.listener==listener) {
          if (type=="DOMContentLoaded") {
            this.detachEvent("onreadystatechange",eventListener.wrapper);
          } else {
            this.detachEvent("on"+type,eventListener.wrapper);
          }
          eventListeners.splice(counter, 1);
          break;
        }
        ++counter;
      }
    };
    Element.prototype.addEventListener=addEventListener;
    Element.prototype.removeEventListener=removeEventListener;
    if (HTMLDocument) {
      HTMLDocument.prototype.addEventListener=addEventListener;
      HTMLDocument.prototype.removeEventListener=removeEventListener;
    }
    if (Window) {
      Window.prototype.addEventListener=addEventListener;
      Window.prototype.removeEventListener=removeEventListener;
    }
  }
})();</pre> <h3 id="Older_way_to_register_event_listeners">Older way to register event listeners</h3> <p><code>addEventListener()</code> was introduced with the DOM 2 <a href="http://www.w3.org/TR/DOM-Level-2-Events" target="_blank">Events</a> specification. Before then, event listeners were registered as follows:</p> <pre data-language="js">// Passing a function reference — do not add '()' after it, which would call the function!
el.onclick = modifyText;

// Using a function expression
element.onclick = function() {
  // ... function logic ...
};
</pre> <p>This method replaces the existing <code>click</code> event listener(s) on the element if there are any. Other events and associated event handlers such as <code>blur</code> (<code>onblur</code>) and <code>keypress</code> (<code>onkeypress</code>) behave similarly.</p> <p>Because it was essentially part of DOM 0, this technique for adding event listeners is very widely supported and requires no special cross–browser code. It is normally used to register event listeners dynamically unless the extra features of <code>addEventListener()</code> are needed.</p> <h3 id="Memory_issues">Memory issues</h3> <pre data-language="js">var i;
var els = document.getElementsByTagName('*');

// Case 1
for(i=0 ; i&lt;els.length ; i++){
  els[i].addEventListener("click", function(e){/*do something*/}, false);
}

// Case 2
function processEvent(e){
  /*do something*/
}

for(i=0 ; i&lt;els.length ; i++){
  els[i].addEventListener("click", processEvent, false);
}

</pre> <p>In the first case, a new (anonymous) function is created with each iteration of the loop. In the second case, the same previously declared function is used as an event handler. This results in smaller memory consumption. Moreover, in the first case, it is not possible to call <a href="../removeeventlistener/"><code>removeEventListener()</code></a> because no reference to the anonymous function is kept. In the second case, it's possible to do <code>myElement.removeEventListener("click", processEvent, false)</code>.</p> <h3 id="Improving_scrolling_performance_with_passive_listeners">Improving scrolling performance with passive listeners</h3> <p>The default value for the passive option is <code>false</code>. Starting in Chrome 56 (desktop, Chrome for Android, and Android webview) the default value for <code><a href="https://developer.mozilla.org/en-US/docs/Web/Events/touchstart" target="_blank">touchstart</a></code> and <code><a href="https://developer.mozilla.org/en-US/docs/Web/Events/touchmove" target="_blank">touchmove</a></code> is <code>true</code> and calls to <a href="../../event/preventdefault/"><code>preventDefault()</code></a> are not permitted. To override this behavior, you set the <code>passive</code> option to <code>false</code> as shown in the example below. This change prevents the listener from blocking page rendering while a user is scrolling. A demo is available on the <a href="https://developers.google.com/web/updates/2016/06/passive-event-listeners" target="_blank">Google Developer</a> site. Please note that Edge does not support the <code>options</code> argument at all, and adding it will prevent the use of the <code>useCapture</code> argument without proper use of <a href="#Safely_detecting_option_support">feature detection</a>.</p> <pre data-language="js">/* Feature detection */
var passiveSupported = false;

try {
  window.addEventListener("test", null, Object.defineProperty({}, "passive", { get: function() { passiveSupported = true; } }));
} catch(err) {}

/* Event Listener */
var elem = document.getElementById('elem');

elem.addEventListener('touchmove', function listener() {
  /* do something */
}, passiveSupported ? { passive: false } : false);
</pre> <p>Setting <code>passive</code> isn't important for the basic <code><a href="https://developer.mozilla.org/en-US/docs/Web/Events/scroll" target="_blank">scroll</a></code> event, as it cannot be canceled, so its listener can't block page rendering anyway.</p> <h2 id="Specifications">Specifications</h2> <div class="_table"><table class="standard-table"> <tbody> <tr> <th>Specification</th> <th>Status</th> <th>Comment</th> </tr> <tr> <td><a href="https://dom.spec.whatwg.org/#dom-eventtarget-addeventlistener" hreflang="en" target="_blank">DOM<br><small>The definition of 'EventTarget.addEventListener()' in that specification.</small></a></td> <td><span class="spec-Living">Living Standard</span></td> <td> </td> </tr> <tr> <td><a href="https://www.w3.org/TR/dom/#dom-eventtarget-addeventlistener" hreflang="en" target="_blank">DOM4<br><small>The definition of 'EventTarget.addEventListener()' in that specification.</small></a></td> <td><span class="spec-Obsolete">Obsolete</span></td> <td> </td> </tr> <tr> <td><a href="https://www.w3.org/TR/DOM-Level-2-Events/events.html#Events-EventTarget-addEventListener" hreflang="en" target="_blank">Document Object Model (DOM) Level 2 Events Specification<br><small>The definition of 'EventTarget.addEventListener()' in that specification.</small></a></td> <td><span class="spec-Obsolete">Obsolete</span></td> <td>Initial definition</td> </tr> </tbody> </table></div> <h2 id="Browser_compatibility">Browser compatibility</h2>   <div class="_table"><table class="compat-table"> <tbody> <tr> <th>Feature</th> <th>Chrome</th> <th>Edge</th> <th>Firefox (Gecko)</th> <th>Internet Explorer</th> <th>Opera</th> <th>Safari (WebKit)</th> </tr> <tr> <td>Basic support</td> <td>1.0<sup>[1][2]</sup>
</td> <td><span style="color: #888;">(Yes)</span></td> <td>1.0 (1.7 or earlier)<sup>[3]</sup>
</td> <td>9.0<sup>[4]</sup>
</td> <td>7</td> <td>1.0<sup>[1]</sup>
</td> </tr> <tr> <td>
<code>useCapture</code> made optional</td> <td>1.0</td> <td><span style="color: #888;">(Yes)</span></td> <td>
<a href="https://developer.mozilla.org/en-US/Firefox/Releases/6" target="_blank">6</a> (6)</td> <td>9.0</td> <td>11.60</td> <td><span style="color: #888;">(Yes)</span></td> </tr> <tr> <td>
<code>options</code> parameter (with <code>capture</code> and <code>passive</code> values)<sup>[5]</sup>
</td> <td> <p>49.0 (<code>capture</code>) 51.0 (<code>passive</code>)</p> </td> <td><span style="color: #888;">(Yes)</span></td> <td>
<a href="https://developer.mozilla.org/en-US/Firefox/Releases/49" target="_blank">49</a> (49)</td> <td><span style="color: #f00;">No support</span></td> <td><span style="color: #888;">(Yes)</span></td> <td>10</td> </tr> <tr> <td>
<code>once</code> value in the <code>options</code> parameter</td> <td>55</td> <td>Unknown (16.16299)</td> <td>
<a href="https://developer.mozilla.org/en-US/Firefox/Releases/50" target="_blank">50</a> (50)</td> <td><span style="color: #f00;">No support</span></td> <td>42</td> <td>10</td> </tr> <tr> <td>Passive defaults to true for <a href="https://developer.mozilla.org/en-US/docs/Web/API/Touchstart" target="_blank"><code>touchstart</code></a> and <a href="https://developer.mozilla.org/en-US/docs/Web/API/Touchmove" target="_blank"><code>touchmove</code></a>
</td> <td>55</td> <td><span style="color: #f00;">No support</span></td> <td><span style="color: #f00;">No support</span></td> <td><span style="color: #f00;">No support</span></td> <td><span style="color: #f00;">No support</span></td> <td><span style="color: #f00;">No support</span></td> </tr> </tbody> </table></div>   <div class="_table"><table class="compat-table"> <tbody> <tr> <th>Feature</th> <th>Android Webview</th> <th>Chrome for Android</th> <th>Edge</th> <th>Firefox Mobile (Gecko)</th> <th>IE Mobile</th> <th>Opera Mobile</th> <th>Safari Mobile</th> </tr> <tr> <td>Basic support</td> <td> <p><span style="color: #888;">(Yes)</span><sup>[2]</sup></p> </td> <td> <p><span style="color: #888;">(Yes)</span></p> </td> <td><span style="color: #888;">(Yes)</span></td> <td>1.0 (1.0)<sup>[3]</sup>
</td> <td>9.0</td> <td>6.0</td> <td>1.0<sup>[1]</sup>
</td> </tr> <tr> <td>
<code>useCapture</code> made optional</td> <td> <p><span style="color: #888;">(Yes)</span></p> </td> <td> <p><span style="color: #888;">(Yes)</span></p> </td> <td><span style="color: #888;">(Yes)</span></td> <td>6.0 (6)</td> <td><span style="color: rgb(255, 153, 0);">?</span></td> <td><span style="color: rgb(255, 153, 0);">?</span></td> <td><span style="color: rgb(255, 153, 0);">?</span></td> </tr> <tr> <td>
<code>options</code> parameter (with <code>capture</code> and <code>passive</code> values)<sup>[5]</sup>
</td> <td>49.0 (<code>capture</code>) 51.0 (<code>passive</code>)</td> <td>49.0 (<code>capture</code>) 51.0 (<code>passive</code>)</td> <td><span style="color: #f00;">No support</span></td> <td>49.0 (49)</td> <td><span style="color: rgb(255, 153, 0);">?</span></td> <td><span style="color: #888;">(Yes)</span></td> <td>10</td> </tr> <tr> <td>
<code>once</code> value in the <code>options</code> parameter</td> <td>55</td> <td>55</td> <td><span style="color: #f00;">No support</span></td> <td>
<a href="https://developer.mozilla.org/en-US/Firefox/Releases/50" target="_blank">50</a> (50)</td> <td><span style="color: #f00;">No support</span></td> <td>42</td> <td>10</td> </tr> <tr> <td>Passive defaults to true for <a href="https://developer.mozilla.org/en-US/docs/Web/API/Touchstart" target="_blank"><code>touchstart</code></a> and <a href="https://developer.mozilla.org/en-US/docs/Web/API/Touchmove" target="_blank"><code>touchmove</code></a>
</td> <td>55</td> <td>55</td> <td><span style="color: #f00;">No support</span></td> <td><span style="color: #f00;">No support</span></td> <td><span style="color: #f00;">No support</span></td> <td><span style="color: #f00;">No support</span></td> <td><span style="color: #f00;">No support</span></td> </tr> </tbody> </table></div>  <p>[1] Although WebKit has explicitly added <code>[optional]</code> to the <code>useCapture</code> parameter <a href="http://trac.webkit.org/changeset/89781" target="_blank">as recently as June 2011</a>, it had been working before the change. The new change landed in Safari 5.1 and Chrome 13.</p> <p>[2] Before Chrome 49, the type and listener parameters were optional.</p> <p>[3] Before Firefox 6, the browser would throw an error if the <code>useCapture</code> parameter was not explicitly <code>false</code>. Before Gecko 9.0 (Firefox 9.0 / Thunderbird 9.0 / SeaMonkey 2.6), <code>addEventListener()</code> would throw an exception if the <code>listener</code> parameter was <code>null</code>; now the method returns without error, but without doing anything.</p> <p>[4] Older versions of Internet Explorer support the proprietary <a href="https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/attachEvent" target="_blank"><code>EventTarget.attachEvent</code></a> method instead.</p> <p>[5] For backward compatibility, browsers that support <code>options</code> allow the third parameter to be either <code>options</code> or <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean" target="_blank"><code>Boolean</code></a>.</p> <h2 id="See_also">See also</h2> <ul> <li><a href="../removeeventlistener/"><code>EventTarget.removeEventListener()</code></a></li> <li><a href="https://developer.mozilla.org/en-US/docs/DOM/Creating_and_triggering_events" target="_blank">Creating and triggering custom events</a></li> <li><a href="http://www.quirksmode.org/js/this.html" target="_blank">More details on the use of <code>this</code> in event handlers</a></li> </ul>
<div class="_attribution">
  <p class="_attribution-p">
    <a href="https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/addEventListener%24edit" class="_attribution-link" target="_blank">Edit this page on MDN</a>
  </p>
</div>
<div class="_attribution">
  <p class="_attribution-p">
    © 2005–2018 Mozilla Developer Network and individual contributors.<br>Licensed under the Creative Commons Attribution-ShareAlike License v2.5 or later.<br>
    <a href="https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/addEventListener" class="_attribution-link" target="_blank">https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/addEventListener</a>
  </p>
</div>

			</div>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
