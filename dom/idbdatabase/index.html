
<!DOCTYPE HTML>

<html lang="en">

<head>
  <meta charset="utf-8">
  <title>IDBDatabase - DOM - W3cubDocs</title>
  
  <meta name="description" content="The IDBDatabase interface of the IndexedDB API provides a connection to a database; you can use an IDBDatabase object to open a transaction on your &hellip;">
  <meta name="keywords" content="idbdatabase, -, dom">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="http://docs.w3cub.com/dom/idbdatabase/">
  <link href="/favicon.png" rel="icon">
  <link type="text/css" rel="stylesheet" href="/assets/application-e0f881b0fce8cbe96f33dadc355b7159d5d2912911231446d60eb8f9caffa802.css">
  <script type="text/javascript" src="/assets/application-8fc46316434047265cd383f02b8e7f434ed7dec4a59f920dd633deef8d488d1b.js"></script>
  <script src="/json/dom.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body>
	<div class="_app">
	<header class="_header">
  
  <form class="_search">
    <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
    <a class="_search-clear"></a>
    <div class="_search-tag"></div>
  </form>
  
  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/dom/" class="_nav-link" title="" style="margin-left:0;">DOM</a></span>
  
  <nav class="_nav">
    <a href="/app/" class="_nav-link ">App</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		<div class="_list">
			
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<div class="_page _mdn">
				
<h1>IDBDatabase</h1> <p>The <code>IDBDatabase</code> interface of the IndexedDB API provides a <a href="https://developer.mozilla.org/en-US/docs/IndexedDB#database_connection" target="_blank">connection to a database</a>; you can use an <code>IDBDatabase</code> object to open a <a href="https://developer.mozilla.org/en-US/docs/IndexedDB#gloss_transaction" target="_blank">transaction</a> on your database then create, manipulate, and delete objects (data) in that database. The interface provides the only way to get and manage versions of the database.</p> <div class="note">
<strong>Note:</strong> This feature is available in <a href="../web_workers_api/">Web Workers</a>.</div> <div class="note"> <p><strong>Note</strong>: Everything you do in IndexedDB always happens in the context of a <a href="https://developer.mozilla.org/en-US/docs/IndexedDB/Basic_Concepts_Behind_IndexedDB#gloss_transaction" target="_blank">transaction</a>, representing interactions with data in the database. All objects in IndexedDB — including object stores, indexes, and cursors — are tied to a particular transaction. Thus, you cannot execute commands, access data, or open anything outside of a transaction.</p> </div>  <iframe class="live-sample-frame inheritance-diagram-frame" width="600" height="70" id="frame_inheritance_diagram" src="https://mdn.mozillademos.org/en-US/docs/Web/API/IDBDatabase%24samples/inheritance_diagram?revision=1241477" frameborder="0"></iframe> <h2 id="Properties">Properties</h2>  <dl> <dt>
<a href="../idbdatabase/name/"><code>IDBDatabase.name</code></a> <span class="inlineIndicator readOnly readOnlyInline">Read only </span>
</dt> <dd>A <a href="../domstring/"><code>DOMString</code></a> that contains the name of the connected database.</dd> <dt>
<a href="../idbdatabase/version/"><code>IDBDatabase.version</code></a> <span class="inlineIndicator readOnly readOnlyInline">Read only </span>
</dt> <dd>A <a href="https://developer.mozilla.org/en-US/docs/NSPR_API_Reference/Long_Long_(64-bit)_Integers" target="_blank">64-bit integer</a> that contains the version of the connected database. When a database is first created, this attribute is an empty string.</dd> <dt>
<a href="../idbdatabase/objectstorenames/"><code>IDBDatabase.objectStoreNames</code></a> <span class="inlineIndicator readOnly readOnlyInline">Read only </span>
</dt> <dd>A <a href="https://developer.mozilla.org/en-US/docs/Web/API/DOMStringList" target="_blank"><code>DOMStringList</code></a> that contains a list of the names of the <a href="https://developer.mozilla.org/en-US/docs/IndexedDB#gloss_object_store" target="_blank">object stores</a> currently in the connected database.</dd> </dl> <h3 id="Event_handlers">Event handlers</h3> <dl> <dt><a href="../idbdatabase/onabort/"><code>IDBDatabase.onabort</code></a></dt> <dd>Fires when access of the database is aborted.</dd> <dt><a href="../idbdatabase/onclose/"><code>IDBDatabase.onclose</code></a></dt> <dd>Fires when the <code><a href="https://developer.mozilla.org/en-US/docs/Web/Events/close" target="_blank">close</a></code> event occurs; this happens when the database is unexpectedly closed, such as during application shutdown.</dd> <dt><a href="../idbdatabase/onerror/"><code>IDBDatabase.onerror</code></a></dt> <dd>Fires when access to the database fails.</dd> <dt><a href="../idbdatabase/onversionchange/"><code>IDBDatabase.onversionchange</code></a></dt> <dd> <p>Fires when a database structure change (<a href="../idbopendbrequest/onupgradeneeded/"><code>IDBOpenDBRequest.onupgradeneeded</code></a> event or<a href="../idbfactory/deletedatabase/"><code>IDBFactory.deleteDatabase()</code></a> was requested elsewhere (most probably in another window/tab on the same computer). This is different from the version change transaction (see <a href="../idbversionchangeevent/"><code>IDBVersionChangeEvent</code></a>), but it is related.</p> </dd> </dl> <h2 id="Methods">Methods</h2> <p>Inherits from: <a href="../eventtarget/">EventTarget</a></p> <dl> <dt><a href="../idbdatabase/close/"><code>IDBDatabase.close()</code></a></dt> <dd>Returns immediately and closes the connection to a database in a separate thread.</dd> <dt><a href="../idbdatabase/createobjectstore/"><code>IDBDatabase.createObjectStore()</code></a></dt> <dd>Creates and returns a new object store or index.</dd> <dt><a href="../idbdatabase/deleteobjectstore/"><code>IDBDatabase.deleteObjectStore()</code></a></dt> <dd>Destroys the object store with the given name in the connected database, along with any indexes that reference it.</dd> <dt><a href="../idbdatabase/transaction/"><code>IDBDatabase.transaction()</code></a></dt> <dd>Immediately returns a transaction object (<a href="../idbtransaction/"><code>IDBTransaction</code></a>) containing the <a href="../idbtransaction/objectstore/"><code>IDBTransaction.objectStore</code></a> method, which you can use to access your object store. Runs in a separate thread.</dd> </dl> <h2 name="example" id="example">Example</h2> <p>In the following code snippet, we open a database asynchronously (<a href="../idbfactory/"><code>IDBFactory</code></a>), handle success and error cases, and create a new object store in the case that an upgrade is needed (<a href="../idbdatabase/"><code>IDBdatabase</code></a>). For a complete working example, see our <a href="https://github.com/mdn/to-do-notifications/" target="_blank">To-do Notifications</a> app (<a href="http://mdn.github.io/to-do-notifications/" target="_blank">view example live</a>.)</p> <pre data-language="js">// Let us open our database
  var DBOpenRequest = window.indexedDB.open("toDoList", 4);

  // these two event handlers act on the IDBDatabase object,
  // when the database is opened successfully, or not
  DBOpenRequest.onerror = function(event) {
    note.innerHTML += '&lt;li&gt;Error loading database.&lt;/li&gt;';
  };
 
  DBOpenRequest.onsuccess = function(event) {
    note.innerHTML += '&lt;li&gt;Database initialised.&lt;/li&gt;';
    
    // store the result of opening the database in the db
    // variable. This is used a lot later on
    db = DBOpenRequest.result;
    
    // Run the displayData() function to populate the task
    // list with all the to-do list data already in the IDB
    displayData();
  };
 
  // This event handles the event whereby a new version of
  // the database needs to be created Either one has not
  // been created before, or a new version number has been
  // submitted via the window.indexedDB.open line above
 
  DBOpenRequest.onupgradeneeded = function(event) {
    var db = event.target.result;
    
    db.onerror = function(event) {
      note.innerHTML += '&lt;li&gt;Error loading database.&lt;/li&gt;';
    };

    // Create an objectStore for this database using
    // IDBDatabase.createObjectStore
    
    var objectStore = db.createObjectStore("toDoList", { keyPath: "taskTitle" });
    
    // define what data items the objectStore will contain
    
    objectStore.createIndex("hours", "hours", { unique: false });
    objectStore.createIndex("minutes", "minutes", { unique: false });
    objectStore.createIndex("day", "day", { unique: false });
    objectStore.createIndex("month", "month", { unique: false });
    objectStore.createIndex("year", "year", { unique: false });

    objectStore.createIndex("notified", "notified", { unique: false });
    
    note.innerHTML += '&lt;li&gt;Object store created.&lt;/li&gt;';
  };</pre> <p>This next line opens up a transaction on the Database, then opens an object store that we can then manipulate the data inside of.</p> <pre data-language="js">    var objectStore = db.transaction('toDoList').objectStore('toDoList'); </pre> <h2 id="Specifications">Specifications</h2> <div class="_table"><table class="standard-table"> <tbody> <tr> <th scope="col">Specification</th> <th scope="col">Status</th> <th scope="col">Comment</th> </tr> <tr> <td><a href="https://www.w3.org/TR/IndexedDB/#idl-def-IDBDatabase" hreflang="en" target="_blank">Indexed Database API<br><small>The definition of 'IDBDatabase' in that specification.</small></a></td> <td><span class="spec-REC">Recommendation</span></td> <td>Initial version</td> </tr> <tr> <td><a href="https://w3c.github.io/IndexedDB/#database-interface" hreflang="en" target="_blank">Indexed Database API 2.0<br><small>The definition of 'IDBDatabase' in that specification.</small></a></td> <td><span class="spec-ED">Editor's Draft</span></td> <td> </td> </tr> </tbody> </table></div> <h2 name="Browser_compatibility" id="Browser_compatibility">Browser compatibility</h2>   <div class="_table"><table class="compat-table"> <tbody> <tr> <th>Feature</th> <th>Chrome</th> <th>Edge</th> <th>Firefox (Gecko)<sup>[1]</sup>
</th> <th>Internet Explorer</th> <th>Opera</th> <th>Safari (WebKit)</th> </tr> <tr> <td>Basic support</td> <td>23 <span class="inlineIndicator prefixBox prefixBoxInline"><a href="https://developer.mozilla.org/en-US/docs/Web/Guide/Prefixes" target="_blank">webkit</a></span><br> 24 (unprefixed)<br> 38 (prefixes deprecated)<br> 57 (prefixes removed)</td> <td><span style="color: #888;">(Yes)</span></td> <td>10 <span class="inlineIndicator prefixBox prefixBoxInline"><a href="https://developer.mozilla.org/en-US/docs/Web/Guide/Prefixes" target="_blank">moz</a></span><br> <a href="https://developer.mozilla.org/en-US/Firefox/Releases/16" target="_blank">16</a> (16)</td> <td>10, partial</td> <td>15<br> 44 (prefixes removed)</td> <td>7.1</td> </tr> <tr> <td>Available in workers</td> <td>
<span style="color: #888;">(Yes)</span>(unprefixed)<br> 38 (prefixes deprecated)<br> 57 (prefixes removed)</td> <td><span style="color: #888;">(Yes)</span></td> <td>
<a href="https://developer.mozilla.org/en-US/Firefox/Releases/37" target="_blank">37</a> (37)</td> <td><span style="color: rgb(255, 153, 0);">?</span></td> <td>
<span style="color: #888;">(Yes)</span><br> 44 (prefixes removed)</td> <td><span style="color: rgb(255, 153, 0);">?</span></td> </tr> <tr> <td>
<code><a href="https://developer.mozilla.org/en-US/docs/Web/Events/close" target="_blank">close</a></code> event</td> <td><span style="color: #888;">(Yes)</span></td> <td><span style="color: #f00;">No support</span></td> <td>
<a href="https://developer.mozilla.org/en-US/Firefox/Releases/50" target="_blank">50</a> (50)</td> <td><span style="color: rgb(255, 153, 0);">?</span></td> <td><span style="color: rgb(255, 153, 0);">?</span></td> <td><span style="color: rgb(255, 153, 0);">?</span></td> </tr> <tr> <td>Indexed Database 2.0</td> <td>58</td> <td><span style="color: rgb(255, 153, 0);">?</span></td> <td><span style="color: rgb(255, 153, 0);">?</span></td> <td><span style="color: rgb(255, 153, 0);">?</span></td> <td>45</td> <td><span style="color: rgb(255, 153, 0);">?</span></td> </tr> </tbody> </table></div>   <div class="_table"><table class="compat-table"> <tbody> <tr> <th>Feature</th> <th>Android Webview</th> <th>Chrome for Android</th> <th>Edge</th> <th>Firefox Mobile (Gecko)</th> <th>Firefox OS</th> <th>IE Phone</th> <th>Opera Mobile</th> <th>Safari Mobile</th> </tr> <tr> <td>Basic support</td> <td>
<span style="color: #888;">(Yes)</span><br> 38 (prefixes deprecated)<br> 57 (prefixes removed)</td> <td>
<span style="color: #888;">(Yes)</span><br> 38 (prefixes deprecated)<br> 57 (prefixes removed)</td> <td><span style="color: rgb(255, 153, 0);">?</span></td> <td>22.0 (22)</td> <td>1.0.1</td> <td>10</td> <td>22<br> 44 (prefixes removed)</td> <td>8</td> </tr> <tr> <td>Available in workers</td> <td>
<span style="color: #888;">(Yes)</span>(unprefixed)<br> 38 (prefixes deprecated)<br> 57 (prefixes removed)</td> <td>
<span style="color: #888;">(Yes)</span>(unprefixed)<br> 38 (prefixes deprecated)<br> 57 (prefixes removed)</td> <td><span style="color: #888;">(Yes)</span></td> <td>37.0 (37)</td> <td><span style="color: #888;">(Yes)</span></td> <td><span style="color: rgb(255, 153, 0);">?</span></td> <td>
<span style="color: #888;">(Yes)</span><br> 44 (prefixes removed)</td> <td><span style="color: rgb(255, 153, 0);">?</span></td> </tr> <tr> <td>
<code><a href="https://developer.mozilla.org/en-US/docs/Web/Events/close" target="_blank">close</a></code> event</td> <td><span style="color: #888;">(Yes)</span></td> <td><span style="color: #888;">(Yes)</span></td> <td><span style="color: #f00;">No support</span></td> <td>50.0 (50)</td> <td><span style="color: rgb(255, 153, 0);">?</span></td> <td><span style="color: rgb(255, 153, 0);">?</span></td> <td><span style="color: rgb(255, 153, 0);">?</span></td> <td><span style="color: rgb(255, 153, 0);">?</span></td> </tr> <tr> <td>Indexed Database 2.0</td> <td>58</td> <td>58</td> <td><span style="color: rgb(255, 153, 0);">?</span></td> <td><span style="color: rgb(255, 153, 0);">?</span></td> <td><span style="color: rgb(255, 153, 0);">?</span></td> <td><span style="color: rgb(255, 153, 0);">?</span></td> <td>45</td> <td><span style="color: rgb(255, 153, 0);">?</span></td> </tr> </tbody> </table></div>  <p>[1] As of Firefox 40, IndexedDB transactions have relaxed durability guarantees to increase performance (see <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1112702" target="_blank">bug 1112702</a>). Previously in a <code>readwrite</code> transaction <a href="../idbtransaction/oncomplete/"><code>IDBTransaction.oncomplete</code></a> was fired only when all data was guaranteed to have been flushed to disk. In Firefox 40+ the <code>complete</code> event is fired after the OS has been told to write the data but potentially before that data has actually been flushed to disk. The <code>complete</code> event may thus be delivered quicker than before, however, there exists a small chance that the entire transaction will be lost if the OS crashes or there is a loss of system power before the data is flushed to disk. Since such catastrophic events are rare most consumers should not need to concern themselves further. If you must ensure durability for some reason (e.g. you're storing critical data that cannot be recomputed later) you can force a transaction to flush to disk before delivering the <code>complete</code> event by creating a transaction using the experimental (non-standard) <code>readwriteflush</code> mode (see <a href="../idbdatabase/transaction/"><code>IDBDatabase.transaction</code></a>).</p> <h2 id="See_also">See also</h2> <ul> <li><a href="../indexeddb_api/using_indexeddb/">Using IndexedDB</a></li> <li>Starting transactions: <a href="../idbdatabase/"><code>IDBDatabase</code></a>
</li> <li>Using transactions: <a href="../idbtransaction/"><code>IDBTransaction</code></a>
</li> <li>Setting a range of keys: <a href="../idbkeyrange/"><code>IDBKeyRange</code></a>
</li> <li>Retrieving and making changes to your data: <a href="../idbobjectstore/"><code>IDBObjectStore</code></a>
</li> <li>Using cursors: <a href="../idbcursor/"><code>IDBCursor</code></a>
</li> <li>Reference example: <a href="https://github.com/mdn/to-do-notifications/tree/gh-pages" target="_blank">To-do Notifications</a> (<a href="http://mdn.github.io/to-do-notifications/" target="_blank">view example live</a>.)</li> </ul> <div class="_attribution">
  <p class="_attribution-p">
    <a href="https://developer.mozilla.org/en-US/docs/Web/API/IDBDatabase%24edit" class="_attribution-link" target="_blank">Edit this page on MDN</a>
  </p>
</div>
<div class="_attribution">
  <p class="_attribution-p">
    © 2005–2018 Mozilla Developer Network and individual contributors.<br>Licensed under the Creative Commons Attribution-ShareAlike License v2.5 or later.<br>
    <a href="https://developer.mozilla.org/en-US/docs/Web/API/IDBDatabase" class="_attribution-link" target="_blank">https://developer.mozilla.org/en-US/docs/Web/API/IDBDatabase</a>
  </p>
</div>

			</div>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
