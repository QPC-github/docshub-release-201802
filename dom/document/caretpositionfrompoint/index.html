
<!DOCTYPE HTML>

<html lang="en">

<head>
  <meta charset="utf-8">
  <title>document.caretPositionFromPoint - DOM - W3cubDocs</title>
  
  <meta name="description" content=" This is an experimental technologyCheck the Browser compatibility table carefully before using this in production. ">
  <meta name="keywords" content="document, caretpositionfrompoint, -, dom">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="http://docs.w3cub.com/dom/document/caretpositionfrompoint/">
  <link href="/favicon.png" rel="icon">
  <link type="text/css" rel="stylesheet" href="/assets/application-e0f881b0fce8cbe96f33dadc355b7159d5d2912911231446d60eb8f9caffa802.css">
  <script type="text/javascript" src="/assets/application-8fc46316434047265cd383f02b8e7f434ed7dec4a59f920dd633deef8d488d1b.js"></script>
  <script src="/json/dom.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body>
	<div class="_app">
	<header class="_header">
  
  <form class="_search">
    <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
    <a class="_search-clear"></a>
    <div class="_search-tag"></div>
  </form>
  
  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/dom/" class="_nav-link" title="" style="margin-left:0;">DOM</a></span>
  
  <nav class="_nav">
    <a href="/app/" class="_nav-link ">App</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		<div class="_list">
			
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<div class="_page _mdn">
				
<h1>document.caretPositionFromPoint</h1>
<div class="notice experimental"> <p> <strong>This is an <a href="https://developer.mozilla.org/en-US/docs/MDN/Contribute/Guidelines/Conventions_definitions#Experimental" target="_blank">experimental technology</a></strong><br>Check the <a href="#Browser_compatibility">Browser compatibility table</a> carefully before using this in production.</p> </div> <p>This method is used to retrieve the caret position in a document based on two coordinates. A <a href="../../caretposition/"><code>CaretPosition</code></a> is returned, containing the found DOM node and the character offset in that node.</p> <h2 id="Syntax">Syntax</h2> <pre class="syntaxbox">var <em>caretPosition</em> = <em>document</em>.caretPositionFromPoint(float <em>x</em>, float <em>y</em>);
</pre> <h3 id="Parameters">Parameters</h3> <dl> <dt>x</dt> <dd>A horizontal position within the current viewport.</dd> <dt>y</dt> <dd>A vertical position within the current viewport.</dd> </dl> <h3 id="Return_value">Return value</h3> <p>One of the following:</p> <ul> <li>A <a href="../../caretposition/"><code>CaretPosition</code></a>.</li> <li>
<code>Null</code>, if <strong>x</strong> or <strong>y</strong> are negative, outside viewport, or there is no text entry node.</li> </ul> <h2 id="Example">Example</h2> <p>This example inserts line breaks wherever you click. The code for it is below the demo. </p> <h3 id="Demo">Demo</h3> <p><iframe class="live-sample-frame sample-code-frame" width="100%" height="300px" id="frame_Example" src="https://mdn.mozillademos.org/en-US/docs/Web/API/Document/caretPositionFromPoint%24samples/Example?revision=1180843" frameborder="0"></iframe></p> <h3 id="HTML_Content">HTML Content</h3> <pre data-language="html">&lt;p&gt;Lorem ipsum dolor sit amet, consetetur sadipscing elitr,
sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat,
sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum.
Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet.&lt;/p&gt;</pre> <h3 id="JavaScript_Content">JavaScript Content</h3> <pre data-language="js">function insertBreakAtPoint(e) {
  var range;
  var textNode;
  var offset;

  if (document.caretPositionFromPoint) {
    range = document.caretPositionFromPoint(e.clientX, e.clientY);
    textNode = range.offsetNode;
    offset = range.offset;
  } else if (document.caretRangeFromPoint) {
    range = document.caretRangeFromPoint(e.clientX, e.clientY);
    textNode = range.startContainer;
    offset = range.startOffset;
  }

  // only split TEXT_NODEs
  if (textNode.nodeType == 3) {
    var replacement = textNode.splitText(offset);
    var br = document.createElement('br');
    textNode.parentNode.insertBefore(br, replacement);
  }
}

window.onload = function (){
  var paragraphs = document.getElementsByTagName("p");
  for (i=0 ; i &lt; paragraphs.length; i++) {
    paragraphs[i].addEventListener("click", insertBreakAtPoint, false);
  }
};</pre> <h2 id="Specifications">Specifications</h2> <div class="_table"><table class="standard-table"> <thead> <tr> <th scope="col">Specification</th> <th scope="col">Status</th> <th scope="col">Comment</th> </tr> </thead> <tbody> <tr> <td><a href="https://drafts.csswg.org/cssom-view/#widl-Document-caretPositionFromPoint-CaretPosition-float-x-float-y" hreflang="en" target="_blank">CSS Object Model (CSSOM) View Module<br><small>The definition of '<code>caretPositionFromPoint</code>' in that specification.</small></a></td> <td><span class="spec-WD">Working Draft</span></td> <td>Initial definition</td> </tr> </tbody> </table></div> <h2 id="Browser_compatibility">Browser compatibility</h2>   <div class="_table"><table class="compat-table"> <tbody> <tr> <th>Feature</th> <th>Chrome</th> <th>Firefox</th> <th>Edge</th> <th>Internet Explorer</th> <th>Opera</th> <th>Safari</th> </tr> <tr> <td>Basic support</td> <td>
<span style="color: #f00;">No support</span><sup>[1]</sup>
</td> <td>
<a href="https://developer.mozilla.org/en-US/Firefox/Releases/20" target="_blank">20.0</a> (20.0)<sup>[2]</sup>
</td> <td>
<span style="color: #f00;">No support</span><sup>[1]</sup>
</td> <td>
<span style="color: #f00;">No support</span><sup>[3]</sup>
</td> <td>
<span style="color: #f00;">No support</span><sup>[1]</sup>
</td> <td>
<span style="color: #f00;">No support</span><sup>[1]</sup>
</td> </tr> </tbody> </table></div>   <div class="_table"><table class="compat-table"> <tbody> <tr> <th>Feature</th> <th>Android</th> <th>Firefox Mobile</th> <th>IE Phone</th> <th>Opera Mobile</th> <th>Safari Mobile</th> </tr> <tr> <td>Basic support</td> <td><span style="color: #f00;">No support</span></td> <td>20.0 (20.0)<sup>[2]</sup>
</td> <td><span style="color: #f00;">No support</span></td> <td><span style="color: #f00;">No support</span></td> <td><span style="color: #f00;">No support</span></td> </tr> </tbody> </table></div>  <p>[1] WebKit, Blink and MS Edge has implemented <code>document.caretRangeFromPoint(x,y)</code> from an <a href="http://www.w3.org/TR/2009/WD-cssom-view-20090804/#dom-documentview-caretrangefrompoint" target="_blank">older W3C draft</a>. Also, note that a <a href="../../range/"><code>Range</code></a> is returned.</p> <p>[2] Offsets in <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/textarea" target="_blank"><code>&lt;textarea&gt;</code></a> and <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/iframe" target="_blank"><code>&lt;iframe&gt;</code></a> elements aren't correct - see <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=824965" target="_blank">bug 824965</a> and <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=826069" target="_blank">bug 826069</a> for details.</p> <p>[3] For MS Internet Explorer the proprietary method <code>TextRange.moveToPoint(x,y)</code> might be helpful.</p> <h2 id="See_also">See also</h2> <ul> <li><a href="../../caretposition/"><code>CaretPosition</code></a></li> <li><a href="../../range/"><code>Range</code></a></li> <li><a href="../../text/"><code>Text</code></a></li> <li><a href="../../selection/"><code>Selection</code></a></li> <li><a href="../../window/getselection/"><code>window.getSelection</code></a></li> <li>
<a href="../../range/getboundingclientrect/"><code>Range.getBoundingClientRect()</code></a> - the inverse for this method (get coordinates of a range)</li> <li><a href="../elementfrompoint/"><code>Document.elementFromPoint()</code></a></li> </ul>
<div class="_attribution">
  <p class="_attribution-p">
    <a href="https://developer.mozilla.org/en-US/docs/Web/API/document/caretPositionFromPoint%24edit" class="_attribution-link" target="_blank">Edit this page on MDN</a>
  </p>
</div>
<div class="_attribution">
  <p class="_attribution-p">
    © 2005–2018 Mozilla Developer Network and individual contributors.<br>Licensed under the Creative Commons Attribution-ShareAlike License v2.5 or later.<br>
    <a href="https://developer.mozilla.org/en-US/docs/Web/API/document/caretPositionFromPoint" class="_attribution-link" target="_blank">https://developer.mozilla.org/en-US/docs/Web/API/document/caretPositionFromPoint</a>
  </p>
</div>

			</div>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
