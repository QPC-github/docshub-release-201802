
<!DOCTYPE HTML>

<html lang="en">

<head>
  <meta charset="utf-8">
  <title>contrib.kfac.layer_collection.LayerCollection - TensorFlow Python - W3cubDocs</title>
  
  <meta name="description" content=" Defined in tensorflow&#47;contrib&#47;kfac&#47;python&#47;ops&#47;layer_collection.py. ">
  <meta name="keywords" content="tf, contrib, kfac, layer, collection, layercollection, -, tensorflow, python, tensorflow~python">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="http://docs.w3cub.com/tensorflow~python/tf/contrib/kfac/layer_collection/layercollection/">
  <link href="/favicon.png" rel="icon">
  <link type="text/css" rel="stylesheet" href="/assets/application-e0f881b0fce8cbe96f33dadc355b7159d5d2912911231446d60eb8f9caffa802.css">
  <script type="text/javascript" src="/assets/application-8fc46316434047265cd383f02b8e7f434ed7dec4a59f920dd633deef8d488d1b.js"></script>
  <script src="/json/tensorflow~python.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body>
	<div class="_app">
	<header class="_header">
  
  <form class="_search">
    <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
    <a class="_search-clear"></a>
    <div class="_search-tag"></div>
  </form>
  
  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/tensorflow~python/" class="_nav-link" title="" style="margin-left:0;">TensorFlow Python</a></span>
  
  <nav class="_nav">
    <a href="/app/" class="_nav-link ">App</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		<div class="_list">
			
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<div class="_page _tensorflow">
				
<h1 itemprop="name" class="devsite-page-title"> tf.contrib.kfac.layer_collection.LayerCollection </h1>     <div itemscope itemtype="http://developers.google.com/ReferenceObject"> <meta itemprop="name" content="tf.contrib.kfac.layer_collection.LayerCollection"> <meta itemprop="path" content="r1.4"> <meta itemprop="property" content="generic_registrations"> <meta itemprop="property" content="graph"> <meta itemprop="property" content="subgraph"> <meta itemprop="property" content="__init__"> <meta itemprop="property" content="create_subgraph"> <meta itemprop="property" content="get_blocks"> <meta itemprop="property" content="get_factors"> <meta itemprop="property" content="get_use_count_map"> <meta itemprop="property" content="make_or_get_factor"> <meta itemprop="property" content="register_block"> <meta itemprop="property" content="register_categorical_predictive_distribution"> <meta itemprop="property" content="register_conv2d"> <meta itemprop="property" content="register_fully_connected"> <meta itemprop="property" content="register_generic"> <meta itemprop="property" content="register_multi_bernoulli_predictive_distribution"> <meta itemprop="property" content="register_normal_predictive_distribution"> <meta itemprop="property" content="reset_internals"> <meta itemprop="property" content="total_loss"> <meta itemprop="property" content="total_sampled_loss"> </div> <h2 id="class_layercollection">Class <code>LayerCollection</code>
</h2> <p>Defined in <a href="https://www.github.com/tensorflow/tensorflow/blob/r1.4/tensorflow/contrib/kfac/python/ops/layer_collection.py" target="_blank"><code>tensorflow/contrib/kfac/python/ops/layer_collection.py</code></a>.</p> <p>Registry of information about layers and losses.</p> <p>Note that you need to create a new one of these for each MatrixEstimator or KfacOptimizer.</p> <h4 id="attributes">Attributes:</h4> <ul> <li>
<b><code>fisher_blocks</code></b>: a LayersParamsDict (subclass of OrderedDict) mapping layer parameters (Tensors or tuples of Tensors) to FisherBlock instances.</li> <li>
<b><code>fisher_factors</code></b>: an OrderedDict mapping tuples to FisherFactor instances.</li> <li>
<b><code>generic_registrations</code></b>: a list of variables registered via a generic layer registration. Generic registrations handle any and all of the ways a variable is used in the graph, which means we don't need to check their registration when verifying the correctness of the graph.</li> <li>
<b><code>losses</code></b>: a list of LossFunction objects. The loss to be optimized is their sum.</li> </ul> <h2 id="properties">Properties</h2> <h3 id="generic_registrations"><code>generic_registrations</code></h3> <h3 id="graph"><code>graph</code></h3> <h3 id="subgraph"><code>subgraph</code></h3> <h2 id="methods">Methods</h2> <h3 id="__init__"><code>__init__</code></h3> <pre class="prettyprint lang-python" data-language="python">__init__(
    graph=None,
    name='LayerCollection'
)
</pre> <h3 id="create_subgraph"><code>create_subgraph</code></h3> <pre class="prettyprint lang-python" data-language="python">create_subgraph()
</pre> <h3 id="get_blocks"><code>get_blocks</code></h3> <pre class="prettyprint lang-python" data-language="python">get_blocks()
</pre> <h3 id="get_factors"><code>get_factors</code></h3> <pre class="prettyprint lang-python" data-language="python">get_factors()
</pre> <h3 id="get_use_count_map"><code>get_use_count_map</code></h3> <pre class="prettyprint lang-python" data-language="python">get_use_count_map()
</pre> <p>Returns a dict of variables to their number of registrations.</p> <h3 id="make_or_get_factor"><code>make_or_get_factor</code></h3> <pre class="prettyprint lang-python" data-language="python">make_or_get_factor(
    cls,
    args
)
</pre> <h3 id="register_block"><code>register_block</code></h3> <pre class="prettyprint lang-python" data-language="python">register_block(
    layer_key,
    fisher_block
)
</pre> <p>Validates and registers the layer_key associated with the fisher_block.</p> <p>Validation consists of checking whether the key was already registered or if any of the elements of layer_key (if it's a tuple) were already registered as part of another tuple (throws an error if so). If any of the elements were registered by themselves, or as part of tuples that are subsets of this layer_key, those registrations are first removed.</p> <p>If the layer_key is a subset of an existing registration, registration of the new, smaller layer_key is skipped.</p> <p>e.g. If registrations include {'a': foo, ('b', 'c'): bar}, then - register_layer('a', baz) -&gt; ValueError - register_layer(('b', 'c', 'd'), baz) -&gt; {'a': foo, ('b', 'c', 'd'): baz} - register_layer('b', baz) -&gt; {'a': foo, ('b', 'c'): bar} (No change) - register_layer(('a', 'd'), baz) -&gt; {('a', 'd'): baz, ('b', 'c'): bar} - register_layer(('b', 'd'), baz) -&gt; ValueError</p> <h4 id="args">Args:</h4> <ul> <li>
<b><code>layer_key</code></b>: The key to check for in existing registrations and to register if valid.</li> <li>
<b><code>fisher_block</code></b>: The associated fisher block.</li> </ul> <h4 id="raises">Raises:</h4> <ul> <li>
<b><code>ValueError</code></b>: If the layer_key was already registered, or if a subset of the layer_key has already been registered as part of a different tuple.</li> </ul> <h3 id="register_categorical_predictive_distribution"><code>register_categorical_predictive_distribution</code></h3> <pre class="prettyprint lang-python" data-language="python">register_categorical_predictive_distribution(
    logits,
    seed=None,
    targets=None
)
</pre> <p>Registers a categorical predictive distribution.</p> <h4 id="args_1">Args:</h4> <ul> <li>
<b><code>logits</code></b>: The logits of the distribution (i.e. its parameters).</li> <li>
<b><code>seed</code></b>: The seed for the RNG (for debugging) (Default: None)</li> <li>
<b><code>targets</code></b>: (OPTIONAL) The targets for the loss function. Only required if one wants to call total_loss() instead of total_sampled_loss(). total_loss() is required, for example, to estimate the "empirical Fisher" (instead of the true Fisher). (Default: None)</li> </ul> <h3 id="register_conv2d"><code>register_conv2d</code></h3> <pre class="prettyprint lang-python" data-language="python">register_conv2d(
    params,
    strides,
    padding,
    inputs,
    outputs,
    approx=APPROX_KRONECKER_NAME
)
</pre> <h3 id="register_fully_connected"><code>register_fully_connected</code></h3> <pre class="prettyprint lang-python" data-language="python">register_fully_connected(
    params,
    inputs,
    outputs,
    approx=APPROX_KRONECKER_NAME
)
</pre> <h3 id="register_generic"><code>register_generic</code></h3> <pre class="prettyprint lang-python" data-language="python">register_generic(
    params,
    batch_size,
    approx=APPROX_DIAGONAL_NAME
)
</pre> <h3 id="register_multi_bernoulli_predictive_distribution"><code>register_multi_bernoulli_predictive_distribution</code></h3> <pre class="prettyprint lang-python" data-language="python">register_multi_bernoulli_predictive_distribution(
    logits,
    seed=None,
    targets=None
)
</pre> <p>Registers a multi-Bernoulli predictive distribution.</p> <h4 id="args_2">Args:</h4> <ul> <li>
<b><code>logits</code></b>: The logits of the distribution (i.e. its parameters).</li> <li>
<b><code>seed</code></b>: The seed for the RNG (for debugging) (Default: None)</li> <li>
<b><code>targets</code></b>: (OPTIONAL) The targets for the loss function. Only required if one wants to call total_loss() instead of total_sampled_loss(). total_loss() is required, for example, to estimate the "empirical Fisher" (instead of the true Fisher). (Default: None)</li> </ul> <h3 id="register_normal_predictive_distribution"><code>register_normal_predictive_distribution</code></h3> <pre class="prettyprint lang-python" data-language="python">register_normal_predictive_distribution(
    mean,
    var=0.5,
    seed=None,
    targets=None
)
</pre> <p>Registers a normal predictive distribution.</p> <h4 id="args_3">Args:</h4> <ul> <li>
<b><code>mean</code></b>: The mean vector defining the distribution.</li> <li>
<b><code>var</code></b>: The variance (must be a scalar). Note that the default value of 0.5 corresponds to a standard squared error loss (target - prediction)<strong>2. If your squared error loss is of the form 0.5*(target - prediction)</strong>2 you should use var=1.0. (Default: 0.5)</li> <li>
<b><code>seed</code></b>: The seed for the RNG (for debugging) (Default: None)</li> <li>
<b><code>targets</code></b>: (OPTIONAL) The targets for the loss function. Only required if one wants to call total_loss() instead of total_sampled_loss(). total_loss() is required, for example, to estimate the "empirical Fisher" (instead of the true Fisher). (Default: None)</li> </ul> <h3 id="reset_internals"><code>reset_internals</code></h3> <pre class="prettyprint lang-python" data-language="python">reset_internals(
    graph=None,
    name='LayerCollection'
)
</pre> <h3 id="total_loss"><code>total_loss</code></h3> <pre class="prettyprint lang-python" data-language="python">total_loss()
</pre> <h3 id="total_sampled_loss"><code>total_sampled_loss</code></h3> <pre class="prettyprint lang-python" data-language="python">total_sampled_loss()
</pre>
<div class="_attribution">
  <p class="_attribution-p">
    © 2017 The TensorFlow Authors. All rights reserved.<br>Licensed under the Creative Commons Attribution License 3.0.<br>Code samples licensed under the Apache 2.0 License.<br>
    <a href="https://www.tensorflow.org/api_docs/python/tf/contrib/kfac/layer_collection/LayerCollection" class="_attribution-link" target="_blank">https://www.tensorflow.org/api_docs/python/tf/contrib/kfac/layer_collection/LayerCollection</a>
  </p>
</div>

			</div>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
