
<!DOCTYPE HTML>

<html lang="en">

<head>
  <meta charset="utf-8">
  <title>neighbors.LSHForest() - Scikit-learn - W3cubDocs</title>
  
  <meta name="description" content=" Warning ">
  <meta name="keywords" content="sklearn, neighbors, lshforest, -, scikit-learn, scikit_learn">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="http://docs.w3cub.com/scikit_learn/modules/generated/sklearn.neighbors.lshforest/">
  <link href="/favicon.png" rel="icon">
  <link type="text/css" rel="stylesheet" href="/assets/application-e0f881b0fce8cbe96f33dadc355b7159d5d2912911231446d60eb8f9caffa802.css">
  <script type="text/javascript" src="/assets/application-8fc46316434047265cd383f02b8e7f434ed7dec4a59f920dd633deef8d488d1b.js"></script>
  <script src="/json/scikit_learn.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body>
	<div class="_app">
	<header class="_header">
  
  <form class="_search">
    <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
    <a class="_search-clear"></a>
    <div class="_search-tag"></div>
  </form>
  
  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/scikit_learn/" class="_nav-link" title="" style="margin-left:0;">scikit-learn</a></span>
  
  <nav class="_nav">
    <a href="/app/" class="_nav-link ">App</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		<div class="_list">
			
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<div class="_page _sphinx">
				
<h1 id="sklearn-neighbors-lshforest">sklearn.neighbors.LSHForest</h1> <div class="admonition warning"> <p class="first admonition-title">Warning</p> <p class="last"><strong>DEPRECATED</strong></p> </div> <dl class="class"> <dt id="sklearn.neighbors.LSHForest">
<code>class sklearn.neighbors.LSHForest(n_estimators=10, radius=1.0, n_candidates=50, n_neighbors=5, min_hash_match=4, radius_cutoff_ratio=0.9, random_state=None)</code> <a class="reference external" href="https://github.com/scikit-learn/scikit-learn/blob/f3320a6f/sklearn/neighbors/approximate.py#L110" target="_blank"><span class="viewcode-link">[source]</span></a>
</dt> <dd>
<p>Performs approximate nearest neighbor search using LSH forest.</p> <p>LSH Forest: Locality Sensitive Hashing forest [1] is an alternative method for vanilla approximate nearest neighbor search methods. LSH forest data structure has been implemented using sorted arrays and binary search and 32 bit fixed-length hashes. Random projection is used as the hash family which approximates cosine distance.</p> <p>The cosine distance is defined as <code>1 - cosine_similarity</code>: the lowest value is 0 (identical point) but it is bounded above by 2 for the farthest points. Its value does not depend on the norm of the vector points but only on their relative angles.</p> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body">  <tr>
<th class="field-name">Parameters:</th>
<td class="field-body">
<p class="first"><strong>n_estimators</strong> : int (default = 10)</p>  <p>Number of trees in the LSH Forest.</p>  <p><strong>radius</strong> : float, optinal (default = 1.0)</p>  <p>Radius from the data point to its neighbors. This is the parameter space to use by default for the <a class="reference internal" href="#sklearn.neighbors.LSHForest.radius_neighbors" title="sklearn.neighbors.LSHForest.radius_neighbors"><code>radius_neighbors</code></a> queries.</p>  <p><strong>n_candidates</strong> : int (default = 50)</p>  <p>Minimum number of candidates evaluated per estimator, assuming enough items meet the <code>min_hash_match</code> constraint.</p>  <p><strong>n_neighbors</strong> : int (default = 5)</p>  <p>Number of neighbors to be returned from query function when it is not provided to the <a class="reference internal" href="#sklearn.neighbors.LSHForest.kneighbors" title="sklearn.neighbors.LSHForest.kneighbors"><code>kneighbors</code></a> method.</p>  <p><strong>min_hash_match</strong> : int (default = 4)</p>  <p>lowest hash length to be searched when candidate selection is performed for nearest neighbors.</p>  <p><strong>radius_cutoff_ratio</strong> : float, optional (default = 0.9)</p>  <p>A value ranges from 0 to 1. Radius neighbors will be searched until the ratio between total neighbors within the radius and the total candidates becomes less than this value unless it is terminated by hash length reaching <code>min_hash_match</code>.</p>  <p><strong>random_state</strong> : int, RandomState instance or None, optional (default=None)</p>  <p>If int, random_state is the seed used by the random number generator; If RandomState instance, random_state is the random number generator; If None, the random number generator is the RandomState instance used by <code>np.random</code>.</p>  </td> </tr> <tr>
<th class="field-name">Attributes:</th>
<td class="field-body">
<p class="first"><strong>hash_functions_</strong> : list of GaussianRandomProjectionHash objects</p>  <p>Hash function g(p,x) for a tree is an array of 32 randomly generated float arrays with the same dimension as the data set. This array is stored in GaussianRandomProjectionHash object and can be obtained from <code>components_</code> attribute.</p>  <p><strong>trees_</strong> : array, shape (n_estimators, n_samples)</p>  <p>Each tree (corresponding to a hash function) contains an array of sorted hashed values. The array representation may change in future versions.</p>  <p><strong>original_indices_</strong> : array, shape (n_estimators, n_samples)</p>  <p>Original indices of sorted hashed values in the fitted index.</p>  </td> </tr>  </table> <h4 class="rubric">References</h4> <table class="docutils citation" frame="void" id="r242" rules="none">   <tr>
<td class="label"><a class="fn-backref" href="#id1">[R242]</a></td>
<td>M. Bawa, T. Condie and P. Ganesan, “LSH Forest: Self-Tuning Indexes for Similarity Search”, WWW ‘05 Proceedings of the 14th international conference on World Wide Web, 651-660, 2005.</td>
</tr>  </table> <h4 class="rubric">Examples</h4> <pre data-language="python">&gt;&gt;&gt; from sklearn.neighbors import LSHForest
</pre> <pre data-language="python">&gt;&gt;&gt; X_train = [[5, 5, 2], [21, 5, 5], [1, 1, 1], [8, 9, 1], [6, 10, 2]]
&gt;&gt;&gt; X_test = [[9, 1, 6], [3, 1, 10], [7, 10, 3]]
&gt;&gt;&gt; lshf = LSHForest(random_state=42)
&gt;&gt;&gt; lshf.fit(X_train)  
LSHForest(min_hash_match=4, n_candidates=50, n_estimators=10,
          n_neighbors=5, radius=1.0, radius_cutoff_ratio=0.9,
          random_state=42)
&gt;&gt;&gt; distances, indices = lshf.kneighbors(X_test, n_neighbors=2)
&gt;&gt;&gt; distances                                        
array([[ 0.069...,  0.149...],
       [ 0.229...,  0.481...],
       [ 0.004...,  0.014...]])
&gt;&gt;&gt; indices
array([[1, 2],
       [2, 0],
       [4, 0]])
</pre> <h4 class="rubric">Methods</h4> <table class="longtable docutils">   <tr>
<td>
<a class="reference internal" href="#sklearn.neighbors.LSHForest.fit" title="sklearn.neighbors.LSHForest.fit"><code>fit</code></a>(X[, y])</td> <td>Fit the LSH forest on the data.</td> </tr> <tr>
<td>
<a class="reference internal" href="#sklearn.neighbors.LSHForest.get_params" title="sklearn.neighbors.LSHForest.get_params"><code>get_params</code></a>([deep])</td> <td>Get parameters for this estimator.</td> </tr> <tr>
<td>
<a class="reference internal" href="#sklearn.neighbors.LSHForest.kneighbors" title="sklearn.neighbors.LSHForest.kneighbors"><code>kneighbors</code></a>(X[, n_neighbors, return_distance])</td> <td>Returns n_neighbors of approximate nearest neighbors.</td> </tr> <tr>
<td>
<a class="reference internal" href="#sklearn.neighbors.LSHForest.kneighbors_graph" title="sklearn.neighbors.LSHForest.kneighbors_graph"><code>kneighbors_graph</code></a>([X, n_neighbors, mode])</td> <td>Computes the (weighted) graph of k-Neighbors for points in X</td> </tr> <tr>
<td>
<a class="reference internal" href="#sklearn.neighbors.LSHForest.partial_fit" title="sklearn.neighbors.LSHForest.partial_fit"><code>partial_fit</code></a>(X[, y])</td> <td>Inserts new data into the already fitted LSH Forest.</td> </tr> <tr>
<td>
<a class="reference internal" href="#sklearn.neighbors.LSHForest.radius_neighbors" title="sklearn.neighbors.LSHForest.radius_neighbors"><code>radius_neighbors</code></a>(X[, radius, return_distance])</td> <td>Finds the neighbors within a given radius of a point or points.</td> </tr> <tr>
<td>
<a class="reference internal" href="#sklearn.neighbors.LSHForest.radius_neighbors_graph" title="sklearn.neighbors.LSHForest.radius_neighbors_graph"><code>radius_neighbors_graph</code></a>([X, radius, mode])</td> <td>Computes the (weighted) graph of Neighbors for points in X</td> </tr> <tr>
<td>
<a class="reference internal" href="#sklearn.neighbors.LSHForest.set_params" title="sklearn.neighbors.LSHForest.set_params"><code>set_params</code></a>(**params)</td> <td>Set the parameters of this estimator.</td> </tr>  </table> <dl class="method"> <dt id="sklearn.neighbors.LSHForest.__init__">
<code>__init__(n_estimators=10, radius=1.0, n_candidates=50, n_neighbors=5, min_hash_match=4, radius_cutoff_ratio=0.9, random_state=None)</code> <a class="reference external" href="https://github.com/scikit-learn/scikit-learn/blob/f3320a6f/sklearn/neighbors/approximate.py#L207" target="_blank"><span class="viewcode-link">[source]</span></a>
</dt> 
</dl> <dl class="method"> <dt id="sklearn.neighbors.LSHForest.fit">
<code>fit(X, y=None)</code> <a class="reference external" href="https://github.com/scikit-learn/scikit-learn/blob/f3320a6f/sklearn/neighbors/approximate.py#L339" target="_blank"><span class="viewcode-link">[source]</span></a>
</dt> <dd>
<p>Fit the LSH forest on the data.</p> <p>This creates binary hashes of input data points by getting the dot product of input points and hash_function then transforming the projection into a binary string array based on the sign (positive/negative) of the projection. A sorted array of binary hashes is created.</p> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body">  <tr>
<th class="field-name">Parameters:</th>
<td class="field-body">
<p class="first"><strong>X</strong> : array_like or sparse (CSR) matrix, shape (n_samples, n_features)</p>  <p>List of n_features-dimensional data points. Each row corresponds to a single data point.</p>  </td> </tr> <tr>
<th class="field-name">Returns:</th>
<td class="field-body">
<p class="first"><strong>self</strong> : object</p>  <p>Returns self.</p>  </td> </tr>  </table> </dd>
</dl> <dl class="method"> <dt id="sklearn.neighbors.LSHForest.get_params">
<code>get_params(deep=True)</code> <a class="reference external" href="https://github.com/scikit-learn/scikit-learn/blob/f3320a6f/sklearn/base.py#L213" target="_blank"><span class="viewcode-link">[source]</span></a>
</dt> <dd>
<p>Get parameters for this estimator.</p> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body">  <tr>
<th class="field-name">Parameters:</th>
<td class="field-body">
<p class="first"><strong>deep</strong> : boolean, optional</p>  <p>If True, will return the parameters for this estimator and contained subobjects that are estimators.</p>  </td> </tr> <tr>
<th class="field-name">Returns:</th>
<td class="field-body">
<p class="first"><strong>params</strong> : mapping of string to any</p>  <p>Parameter names mapped to their values.</p>  </td> </tr>  </table> </dd>
</dl> <dl class="method"> <dt id="sklearn.neighbors.LSHForest.kneighbors">
<code>kneighbors(X, n_neighbors=None, return_distance=True)</code> <a class="reference external" href="https://github.com/scikit-learn/scikit-learn/blob/f3320a6f/sklearn/neighbors/approximate.py#L403" target="_blank"><span class="viewcode-link">[source]</span></a>
</dt> <dd>
<p>Returns n_neighbors of approximate nearest neighbors.</p> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body">  <tr>
<th class="field-name">Parameters:</th>
<td class="field-body">
<p class="first"><strong>X</strong> : array_like or sparse (CSR) matrix, shape (n_samples, n_features)</p>  <p>List of n_features-dimensional data points. Each row corresponds to a single query.</p>  <p><strong>n_neighbors</strong> : int, optional (default = None)</p>  <p>Number of neighbors required. If not provided, this will return the number specified at the initialization.</p>  <p><strong>return_distance</strong> : boolean, optional (default = True)</p>  <p>Returns the distances of neighbors if set to True.</p>  </td> </tr> <tr>
<th class="field-name">Returns:</th>
<td class="field-body">
<p class="first"><strong>dist</strong> : array, shape (n_samples, n_neighbors)</p>  <p>Array representing the cosine distances to each point, only present if return_distance=True.</p>  <p><strong>ind</strong> : array, shape (n_samples, n_neighbors)</p>  <p>Indices of the approximate nearest points in the population matrix.</p>  </td> </tr>  </table> </dd>
</dl> <dl class="method"> <dt id="sklearn.neighbors.LSHForest.kneighbors_graph">
<code>kneighbors_graph(X=None, n_neighbors=None, mode=’connectivity’)</code> <a class="reference external" href="https://github.com/scikit-learn/scikit-learn/blob/f3320a6f/sklearn/neighbors/base.py#L424" target="_blank"><span class="viewcode-link">[source]</span></a>
</dt> <dd>
<p>Computes the (weighted) graph of k-Neighbors for points in X</p> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body">  <tr>
<th class="field-name">Parameters:</th>
<td class="field-body">
<p class="first"><strong>X</strong> : array-like, shape (n_query, n_features), or (n_query, n_indexed) if metric == ‘precomputed’</p>  <p>The query point or points. If not provided, neighbors of each indexed point are returned. In this case, the query point is not considered its own neighbor.</p>  <p><strong>n_neighbors</strong> : int</p>  <p>Number of neighbors for each sample. (default is value passed to the constructor).</p>  <p><strong>mode</strong> : {‘connectivity’, ‘distance’}, optional</p>  <p>Type of returned matrix: ‘connectivity’ will return the connectivity matrix with ones and zeros, in ‘distance’ the edges are Euclidean distance between points.</p>  </td> </tr> <tr>
<th class="field-name">Returns:</th>
<td class="field-body">
<p class="first"><strong>A</strong> : sparse matrix in CSR format, shape = [n_samples, n_samples_fit]</p>  <p>n_samples_fit is the number of samples in the fitted data A[i, j] is assigned the weight of edge that connects i to j.</p>  </td> </tr>  </table> <div class="admonition seealso"> <p class="first admonition-title">See also</p> <p class="last"><a class="reference internal" href="../sklearn.neighbors.nearestneighbors/#sklearn.neighbors.NearestNeighbors.radius_neighbors_graph" title="sklearn.neighbors.NearestNeighbors.radius_neighbors_graph"><code>NearestNeighbors.radius_neighbors_graph</code></a></p> </div> <h4 class="rubric">Examples</h4> <pre data-language="python">&gt;&gt;&gt; X = [[0], [3], [1]]
&gt;&gt;&gt; from sklearn.neighbors import NearestNeighbors
&gt;&gt;&gt; neigh = NearestNeighbors(n_neighbors=2)
&gt;&gt;&gt; neigh.fit(X) 
NearestNeighbors(algorithm='auto', leaf_size=30, ...)
&gt;&gt;&gt; A = neigh.kneighbors_graph(X)
&gt;&gt;&gt; A.toarray()
array([[ 1.,  0.,  1.],
       [ 0.,  1.,  1.],
       [ 1.,  0.,  1.]])
</pre> </dd>
</dl> <dl class="method"> <dt id="sklearn.neighbors.LSHForest.partial_fit">
<code>partial_fit(X, y=None)</code> <a class="reference external" href="https://github.com/scikit-learn/scikit-learn/blob/f3320a6f/sklearn/neighbors/approximate.py#L511" target="_blank"><span class="viewcode-link">[source]</span></a>
</dt> <dd>
<p>Inserts new data into the already fitted LSH Forest. Cost is proportional to new total size, so additions should be batched.</p> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body">  <tr>
<th class="field-name">Parameters:</th>
<td class="field-body">
<p class="first"><strong>X</strong> : array_like or sparse (CSR) matrix, shape (n_samples, n_features)</p>  <p>New data point to be inserted into the LSH Forest.</p>  </td> </tr>  </table> </dd>
</dl> <dl class="method"> <dt id="sklearn.neighbors.LSHForest.radius_neighbors">
<code>radius_neighbors(X, radius=None, return_distance=True)</code> <a class="reference external" href="https://github.com/scikit-learn/scikit-learn/blob/f3320a6f/sklearn/neighbors/approximate.py#L452" target="_blank"><span class="viewcode-link">[source]</span></a>
</dt> <dd>
<p>Finds the neighbors within a given radius of a point or points.</p> <p>Return the indices and distances of some points from the dataset lying in a ball with size <code>radius</code> around the points of the query array. Points lying on the boundary are included in the results.</p> <p>The result points are <em>not</em> necessarily sorted by distance to their query point.</p> <p>LSH Forest being an approximate method, some true neighbors from the indexed dataset might be missing from the results.</p> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body">  <tr>
<th class="field-name">Parameters:</th>
<td class="field-body">
<p class="first"><strong>X</strong> : array_like or sparse (CSR) matrix, shape (n_samples, n_features)</p>  <p>List of n_features-dimensional data points. Each row corresponds to a single query.</p>  <p><strong>radius</strong> : float</p>  <p>Limiting distance of neighbors to return. (default is the value passed to the constructor).</p>  <p><strong>return_distance</strong> : boolean, optional (default = False)</p>  <p>Returns the distances of neighbors if set to True.</p>  </td> </tr> <tr>
<th class="field-name">Returns:</th>
<td class="field-body">
<p class="first"><strong>dist</strong> : array, shape (n_samples,) of arrays</p>  <p>Each element is an array representing the cosine distances to some points found within <code>radius</code> of the respective query. Only present if <code>return_distance=True</code>.</p>  <p><strong>ind</strong> : array, shape (n_samples,) of arrays</p>  <p>Each element is an array of indices for neighbors within <code>radius</code> of the respective query.</p>  </td> </tr>  </table> </dd>
</dl> <dl class="method"> <dt id="sklearn.neighbors.LSHForest.radius_neighbors_graph">
<code>radius_neighbors_graph(X=None, radius=None, mode=’connectivity’)</code> <a class="reference external" href="https://github.com/scikit-learn/scikit-learn/blob/f3320a6f/sklearn/neighbors/base.py#L653" target="_blank"><span class="viewcode-link">[source]</span></a>
</dt> <dd>
<p>Computes the (weighted) graph of Neighbors for points in X</p> <p>Neighborhoods are restricted the points at a distance lower than radius.</p> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body">  <tr>
<th class="field-name">Parameters:</th>
<td class="field-body">
<p class="first"><strong>X</strong> : array-like, shape = [n_samples, n_features], optional</p>  <p>The query point or points. If not provided, neighbors of each indexed point are returned. In this case, the query point is not considered its own neighbor.</p>  <p><strong>radius</strong> : float</p>  <p>Radius of neighborhoods. (default is the value passed to the constructor).</p>  <p><strong>mode</strong> : {‘connectivity’, ‘distance’}, optional</p>  <p>Type of returned matrix: ‘connectivity’ will return the connectivity matrix with ones and zeros, in ‘distance’ the edges are Euclidean distance between points.</p>  </td> </tr> <tr>
<th class="field-name">Returns:</th>
<td class="field-body">
<p class="first"><strong>A</strong> : sparse matrix in CSR format, shape = [n_samples, n_samples]</p>  <p>A[i, j] is assigned the weight of edge that connects i to j.</p>  </td> </tr>  </table> <div class="admonition seealso"> <p class="first admonition-title">See also</p> <p class="last"><a class="reference internal" href="../sklearn.neighbors.kneighbors_graph/#sklearn.neighbors.kneighbors_graph" title="sklearn.neighbors.kneighbors_graph"><code>kneighbors_graph</code></a></p> </div> <h4 class="rubric">Examples</h4> <pre data-language="python">&gt;&gt;&gt; X = [[0], [3], [1]]
&gt;&gt;&gt; from sklearn.neighbors import NearestNeighbors
&gt;&gt;&gt; neigh = NearestNeighbors(radius=1.5)
&gt;&gt;&gt; neigh.fit(X) 
NearestNeighbors(algorithm='auto', leaf_size=30, ...)
&gt;&gt;&gt; A = neigh.radius_neighbors_graph(X)
&gt;&gt;&gt; A.toarray()
array([[ 1.,  0.,  1.],
       [ 0.,  1.,  0.],
       [ 1.,  0.,  1.]])
</pre> </dd>
</dl> <dl class="method"> <dt id="sklearn.neighbors.LSHForest.set_params">
<code>set_params(**params)</code> <a class="reference external" href="https://github.com/scikit-learn/scikit-learn/blob/f3320a6f/sklearn/base.py#L250" target="_blank"><span class="viewcode-link">[source]</span></a>
</dt> <dd>
<p>Set the parameters of this estimator.</p> <p>The method works on simple estimators as well as on nested objects (such as pipelines). The latter have parameters of the form <code>&lt;component&gt;__&lt;parameter&gt;</code> so that it’s possible to update each component of a nested object.</p> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body">  <tr>
<th class="field-name">Returns:</th>
<td class="field-body">
<strong>self</strong> :</td> </tr>  </table> </dd>
</dl> </dd>
</dl> <div class="_attribution">
  <p class="_attribution-p">
    © 2007–2017 The scikit-learn developers<br>Licensed under the 3-clause BSD License.<br>
    <a href="http://scikit-learn.org/stable/modules/generated/sklearn.neighbors.LSHForest.html" class="_attribution-link" target="_blank">http://scikit-learn.org/stable/modules/generated/sklearn.neighbors.LSHForest.html</a>
  </p>
</div>

			</div>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
