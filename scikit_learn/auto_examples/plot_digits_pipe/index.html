
<!DOCTYPE HTML>

<html lang="en">

<head>
  <meta charset="utf-8">
  <title>Example&#58; Pipelining - Scikit-learn - W3cubDocs</title>
  
  <meta name="description" content=" The PCA does an unsupervised dimensionality reduction, while the logistic regression does the prediction. ">
  <meta name="keywords" content="pipelining, chaining, pca, and, logistic, regression, example, -, scikit-learn, scikit_learn">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="http://docs.w3cub.com/scikit_learn/auto_examples/plot_digits_pipe/">
  <link href="/favicon.png" rel="icon">
  <link type="text/css" rel="stylesheet" href="/assets/application-e0f881b0fce8cbe96f33dadc355b7159d5d2912911231446d60eb8f9caffa802.css">
  <script type="text/javascript" src="/assets/application-8fc46316434047265cd383f02b8e7f434ed7dec4a59f920dd633deef8d488d1b.js"></script>
  <script src="/json/scikit_learn.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body>
	<div class="_app">
	<header class="_header">
  
  <form class="_search">
    <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
    <a class="_search-clear"></a>
    <div class="_search-tag"></div>
  </form>
  
  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/scikit_learn/" class="_nav-link" title="" style="margin-left:0;">scikit-learn</a></span>
  
  <nav class="_nav">
    <a href="/app/" class="_nav-link ">App</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		<div class="_list">
			
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<div class="_page _sphinx">
				
<h1 id="sphx-glr-auto-examples-plot-digits-pipe-py">Pipelining: chaining a PCA and a logistic regression</h1> <p id="pipelining-chaining-a-pca-and-a-logistic-regression">The PCA does an unsupervised dimensionality reduction, while the logistic regression does the prediction.</p> <p>We use a GridSearchCV to set the dimensionality of the PCA</p> <img alt="../_images/sphx_glr_plot_digits_pipe_001.png" class="align-center" src="data:image/png;base64,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"> <pre data-language="python">print(__doc__)


# Code source: Gaël Varoquaux
# Modified for documentation by Jaques Grobler
# License: BSD 3 clause


import numpy as np
import matplotlib.pyplot as plt

from sklearn import linear_model, decomposition, datasets
from sklearn.pipeline import Pipeline
from sklearn.model_selection import GridSearchCV

logistic = linear_model.LogisticRegression()

pca = decomposition.PCA()
pipe = Pipeline(steps=[('pca', pca), ('logistic', logistic)])

digits = datasets.load_digits()
X_digits = digits.data
y_digits = digits.target

# Plot the PCA spectrum
pca.fit(X_digits)

plt.figure(1, figsize=(4, 3))
plt.clf()
plt.axes([.2, .2, .7, .7])
plt.plot(pca.explained_variance_, linewidth=2)
plt.axis('tight')
plt.xlabel('n_components')
plt.ylabel('explained_variance_')

# Prediction
n_components = [20, 40, 64]
Cs = np.logspace(-4, 4, 3)

# Parameters of pipelines can be set using ‘__’ separated parameter names:
estimator = GridSearchCV(pipe,
                         dict(pca__n_components=n_components,
                              logistic__C=Cs))
estimator.fit(X_digits, y_digits)

plt.axvline(estimator.best_estimator_.named_steps['pca'].n_components,
            linestyle=':', label='n_components chosen')
plt.legend(prop=dict(size=12))
plt.show()
</pre> <p><strong>Total running time of the script:</strong> ( 0 minutes 8.463 seconds)</p> <div class="sphx-glr-footer docutils container"> <div class="sphx-glr-download docutils container"> <a class="reference download internal" href="http://scikit-learn.org/stable/_downloads/plot_digits_pipe.py" download="" target="_blank"><code>Download Python source code: plot_digits_pipe.py</code></a>
</div> <div class="sphx-glr-download docutils container"> <a class="reference download internal" href="http://scikit-learn.org/stable/_downloads/plot_digits_pipe.ipynb" download="" target="_blank"><code>Download Jupyter notebook: plot_digits_pipe.ipynb</code></a>
</div> </div> <p class="sphx-glr-signature"><a class="reference external" href="https://sphinx-gallery.readthedocs.io" target="_blank">Generated by Sphinx-Gallery</a></p>
<div class="_attribution">
  <p class="_attribution-p">
    © 2007–2017 The scikit-learn developers<br>Licensed under the 3-clause BSD License.<br>
    <a href="http://scikit-learn.org/stable/auto_examples/plot_digits_pipe.html" class="_attribution-link" target="_blank">http://scikit-learn.org/stable/auto_examples/plot_digits_pipe.html</a>
  </p>
</div>

			</div>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
