
<!DOCTYPE HTML>

<html lang="en">

<head>
  <meta charset="utf-8">
  <title>Example&#58; Feature Agglomeration vs. Univariate Selection - Scikit-learn - W3cubDocs</title>
  
  <meta name="description" content=" This example compares 2 dimensionality reduction strategies&#58; ">
  <meta name="keywords" content="feature, agglomeration, univariate, selection, example, -, scikit-learn, scikit_learn">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="http://docs.w3cub.com/scikit_learn/auto_examples/cluster/plot_feature_agglomeration_vs_univariate_selection/">
  <link href="/favicon.png" rel="icon">
  <link type="text/css" rel="stylesheet" href="/assets/application-e0f881b0fce8cbe96f33dadc355b7159d5d2912911231446d60eb8f9caffa802.css">
  <script type="text/javascript" src="/assets/application-8fc46316434047265cd383f02b8e7f434ed7dec4a59f920dd633deef8d488d1b.js"></script>
  <script src="/json/scikit_learn.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body>
	<div class="_app">
	<header class="_header">
  
  <form class="_search">
    <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
    <a class="_search-clear"></a>
    <div class="_search-tag"></div>
  </form>
  
  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/scikit_learn/" class="_nav-link" title="" style="margin-left:0;">scikit-learn</a></span>
  
  <nav class="_nav">
    <a href="/app/" class="_nav-link ">App</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		<div class="_list">
			
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<div class="_page _sphinx">
				
<h1 id="sphx-glr-auto-examples-cluster-plot-feature-agglomeration-vs-univariate-selection-py">Feature agglomeration vs. univariate selection</h1> <p id="feature-agglomeration-vs-univariate-selection">This example compares 2 dimensionality reduction strategies:</p> <ul class="simple"> <li>univariate feature selection with Anova</li> <li>feature agglomeration with Ward hierarchical clustering</li> </ul> <p>Both methods are compared in a regression problem using a BayesianRidge as supervised estimator.</p> <img alt="../../_images/sphx_glr_plot_feature_agglomeration_vs_univariate_selection_001.png" class="align-center" src="data:image/png;base64,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"> <p class="sphx-glr-script-out">Out:</p> <pre data-language="python">________________________________________________________________________________
[Memory] Calling sklearn.cluster.hierarchical.ward_tree...
ward_tree(array([[-0.451933, ..., -0.675318],
       ...,
       [ 0.275706, ..., -1.085711]]),
&lt;1600x1600 sparse matrix of type '&lt;class 'numpy.int64'&gt;'
        with 7840 stored elements in COOrdinate format&gt;, n_clusters=None)
________________________________________________________ward_tree - 0.2s, 0.0min
________________________________________________________________________________
[Memory] Calling sklearn.cluster.hierarchical.ward_tree...
ward_tree(array([[ 0.905206, ...,  0.161245],
       ...,
       [-0.849835, ..., -1.091621]]),
&lt;1600x1600 sparse matrix of type '&lt;class 'numpy.int64'&gt;'
        with 7840 stored elements in COOrdinate format&gt;, n_clusters=None)
________________________________________________________ward_tree - 0.2s, 0.0min
________________________________________________________________________________
[Memory] Calling sklearn.cluster.hierarchical.ward_tree...
ward_tree(array([[ 0.905206, ..., -0.675318],
       ...,
       [-0.849835, ..., -1.085711]]),
&lt;1600x1600 sparse matrix of type '&lt;class 'numpy.int64'&gt;'
        with 7840 stored elements in COOrdinate format&gt;, n_clusters=None)
________________________________________________________ward_tree - 0.2s, 0.0min
________________________________________________________________________________
[Memory] Calling sklearn.feature_selection.univariate_selection.f_regression...
f_regression(array([[-0.451933, ...,  0.275706],
       ...,
       [-0.675318, ..., -1.085711]]),
array([ 25.267703, ..., -25.026711]))
_____________________________________________________f_regression - 0.0s, 0.0min
________________________________________________________________________________
[Memory] Calling sklearn.feature_selection.univariate_selection.f_regression...
f_regression(array([[ 0.905206, ..., -0.849835],
       ...,
       [ 0.161245, ..., -1.091621]]),
array([ -27.447268, ..., -112.638768]))
_____________________________________________________f_regression - 0.0s, 0.0min
________________________________________________________________________________
[Memory] Calling sklearn.feature_selection.univariate_selection.f_regression...
f_regression(array([[ 0.905206, ..., -0.849835],
       ...,
       [-0.675318, ..., -1.085711]]),
array([-27.447268, ..., -25.026711]))
_____________________________________________________f_regression - 0.0s, 0.0min
</pre>  <pre data-language="python"># Author: Alexandre Gramfort &lt;alexandre.gramfort@inria.fr&gt;
# License: BSD 3 clause

print(__doc__)

import shutil
import tempfile

import numpy as np
import matplotlib.pyplot as plt
from scipy import linalg, ndimage

from sklearn.feature_extraction.image import grid_to_graph
from sklearn import feature_selection
from sklearn.cluster import FeatureAgglomeration
from sklearn.linear_model import BayesianRidge
from sklearn.pipeline import Pipeline
from sklearn.externals.joblib import Memory
from sklearn.model_selection import GridSearchCV
from sklearn.model_selection import KFold

# #############################################################################
# Generate data
n_samples = 200
size = 40  # image size
roi_size = 15
snr = 5.
np.random.seed(0)
mask = np.ones([size, size], dtype=np.bool)

coef = np.zeros((size, size))
coef[0:roi_size, 0:roi_size] = -1.
coef[-roi_size:, -roi_size:] = 1.

X = np.random.randn(n_samples, size ** 2)
for x in X:  # smooth data
    x[:] = ndimage.gaussian_filter(x.reshape(size, size), sigma=1.0).ravel()
X -= X.mean(axis=0)
X /= X.std(axis=0)

y = np.dot(X, coef.ravel())
noise = np.random.randn(y.shape[0])
noise_coef = (linalg.norm(y, 2) / np.exp(snr / 20.)) / linalg.norm(noise, 2)
y += noise_coef * noise  # add noise

# #############################################################################
# Compute the coefs of a Bayesian Ridge with GridSearch
cv = KFold(2)  # cross-validation generator for model selection
ridge = BayesianRidge()
cachedir = tempfile.mkdtemp()
mem = Memory(cachedir=cachedir, verbose=1)

# Ward agglomeration followed by BayesianRidge
connectivity = grid_to_graph(n_x=size, n_y=size)
ward = FeatureAgglomeration(n_clusters=10, connectivity=connectivity,
                            memory=mem)
clf = Pipeline([('ward', ward), ('ridge', ridge)])
# Select the optimal number of parcels with grid search
clf = GridSearchCV(clf, {'ward__n_clusters': [10, 20, 30]}, n_jobs=1, cv=cv)
clf.fit(X, y)  # set the best parameters
coef_ = clf.best_estimator_.steps[-1][1].coef_
coef_ = clf.best_estimator_.steps[0][1].inverse_transform(coef_)
coef_agglomeration_ = coef_.reshape(size, size)

# Anova univariate feature selection followed by BayesianRidge
f_regression = mem.cache(feature_selection.f_regression)  # caching function
anova = feature_selection.SelectPercentile(f_regression)
clf = Pipeline([('anova', anova), ('ridge', ridge)])
# Select the optimal percentage of features with grid search
clf = GridSearchCV(clf, {'anova__percentile': [5, 10, 20]}, cv=cv)
clf.fit(X, y)  # set the best parameters
coef_ = clf.best_estimator_.steps[-1][1].coef_
coef_ = clf.best_estimator_.steps[0][1].inverse_transform(coef_.reshape(1, -1))
coef_selection_ = coef_.reshape(size, size)

# #############################################################################
# Inverse the transformation to plot the results on an image
plt.close('all')
plt.figure(figsize=(7.3, 2.7))
plt.subplot(1, 3, 1)
plt.imshow(coef, interpolation="nearest", cmap=plt.cm.RdBu_r)
plt.title("True weights")
plt.subplot(1, 3, 2)
plt.imshow(coef_selection_, interpolation="nearest", cmap=plt.cm.RdBu_r)
plt.title("Feature Selection")
plt.subplot(1, 3, 3)
plt.imshow(coef_agglomeration_, interpolation="nearest", cmap=plt.cm.RdBu_r)
plt.title("Feature Agglomeration")
plt.subplots_adjust(0.04, 0.0, 0.98, 0.94, 0.16, 0.26)
plt.show()

# Attempt to remove the temporary cachedir, but don't worry if it fails
shutil.rmtree(cachedir, ignore_errors=True)
</pre> <p><strong>Total running time of the script:</strong> ( 0 minutes 1.206 seconds)</p> <div class="sphx-glr-footer docutils container"> <div class="sphx-glr-download docutils container"> <a class="reference download internal" href="http://scikit-learn.org/stable/_downloads/plot_feature_agglomeration_vs_univariate_selection.py" download="" target="_blank"><code>Download Python source code: plot_feature_agglomeration_vs_univariate_selection.py</code></a>
</div> <div class="sphx-glr-download docutils container"> <a class="reference download internal" href="http://scikit-learn.org/stable/_downloads/plot_feature_agglomeration_vs_univariate_selection.ipynb" download="" target="_blank"><code>Download Jupyter notebook: plot_feature_agglomeration_vs_univariate_selection.ipynb</code></a>
</div> </div> <p class="sphx-glr-signature"><a class="reference external" href="https://sphinx-gallery.readthedocs.io" target="_blank">Generated by Sphinx-Gallery</a></p>
<div class="_attribution">
  <p class="_attribution-p">
    © 2007–2017 The scikit-learn developers<br>Licensed under the 3-clause BSD License.<br>
    <a href="http://scikit-learn.org/stable/auto_examples/cluster/plot_feature_agglomeration_vs_univariate_selection.html" class="_attribution-link" target="_blank">http://scikit-learn.org/stable/auto_examples/cluster/plot_feature_agglomeration_vs_univariate_selection.html</a>
  </p>
</div>

			</div>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
