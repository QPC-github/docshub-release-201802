
<!DOCTYPE HTML>

<html lang="en">

<head>
  <meta charset="utf-8">
  <title>Imagick&#58;&#58;morphology - PHP - W3cubDocs</title>
  
  <meta name="description" content=" (No version information available, might only be in Git) ">
  <meta name="keywords" content="imagick, morphology, -, php">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="http://docs.w3cub.com/php/imagick.morphology/">
  <link href="/favicon.png" rel="icon">
  <link type="text/css" rel="stylesheet" href="/assets/application-e0f881b0fce8cbe96f33dadc355b7159d5d2912911231446d60eb8f9caffa802.css">
  <script type="text/javascript" src="/assets/application-8fc46316434047265cd383f02b8e7f434ed7dec4a59f920dd633deef8d488d1b.js"></script>
  <script src="/json/php.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body>
	<div class="_app">
	<header class="_header">
  
  <form class="_search">
    <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
    <a class="_search-clear"></a>
    <div class="_search-tag"></div>
  </form>
  
  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/php/" class="_nav-link" title="" style="margin-left:0;">PHP</a></span>
  
  <nav class="_nav">
    <a href="/app/" class="_nav-link ">App</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		<div class="_list">
			
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<div class="_page _php">
				
<div class="refnamediv"> <h1 class="refname">Imagick::morphology</h1> <p class="verinfo">(No version information available, might only be in Git)</p>
<p class="refpurpose"><span class="refname">Imagick::morphology</span> — <span class="dc-title">Description</span></p> </div> <div class="refsect1 description" id="refsect1-imagick.morphology-description"> <h3 class="title">Description</h3> <pre class="methodsynopsis dc-description" data-language="php">public void Imagick::morphology ( int $morphologyMethod , int $iterations , ImagickKernel $ImagickKernel [, string $CHANNEL ] )</pre> <p class="para rdfs-comment"> Applies a user supplied kernel to the image according to the given morphology method. </p> </div> <div class="refsect1 parameters" id="refsect1-imagick.morphology-parameters"> <h3 class="title">Parameters</h3> <dl> <dt> <code class="parameter">morphologyMethod</code>
</dt> <dd> <p class="para"> Which morphology method to use one of the \Imagick::MORPHOLOGY_* constants. </p> </dd> <dt> <code class="parameter">iterations</code>
</dt> <dd> <p class="para"> The number of iteration to apply the morphology function. A value of -1 means loop until no change found. How this is applied may depend on the morphology method. Typically this is a value of 1. </p> </dd> <dt> <code class="parameter">ImagickKernel</code>
</dt>  <dt> <code class="parameter">CHANNEL</code>
</dt>  </dl> </div> <div class="refsect1 returnvalues" id="refsect1-imagick.morphology-returnvalues"> <h3 class="title">Return Values</h3>  </div> <div class="refsect1 examples" id="refsect1-imagick.morphology-examples"> <h3 class="title">Examples</h3> 
<div class="example" id="example-3732"> <p><strong>Example #1 Convolve <span class="function"><strong>Imagick::morphology()</strong></span></strong></p> <div class="example-contents"> <pre class="phpcode" data-language="php">&lt;?php
        $imagick = $this-&gt;getCharacter();
        $kernel = \ImagickKernel::fromBuiltIn(\Imagick::KERNEL_GAUSSIAN, "5,1");
        $imagick-&gt;morphology(\Imagick::MORPHOLOGY_CONVOLVE, 2, $kernel);
        header("Content-Type: image/png");
        echo $imagick-&gt;getImageBlob();

?&gt;</pre> </div> </div> <div class="example" id="example-3733"> <p><strong>Example #2 Correlate <span class="function"><strong>Imagick::morphology()</strong></span></strong></p> <div class="example-contents"> <pre class="phpcode" data-language="php">&lt;?php

        // Top-left pixel must be black
        // Bottom right pixel must be white
        // We don't care about the rest.
        

        $imagick = $this-&gt;getCharacterOutline();
        $kernel = \ImagickKernel::fromMatrix(self::$correlateMatrix, [2, 2]);
        $imagick-&gt;morphology(\Imagick::MORPHOLOGY_CORRELATE, 1, $kernel);
        header("Content-Type: image/png");
        echo $imagick-&gt;getImageBlob();

?&gt;</pre> </div> </div> <div class="example" id="example-3734"> <p><strong>Example #3 Erode <span class="function"><strong>Imagick::morphology()</strong></span></strong></p> <div class="example-contents"> <pre class="phpcode" data-language="php">&lt;?php
        $canvas = $this-&gt;getCharacterOutline();
        $kernel = \ImagickKernel::fromBuiltIn(\Imagick::KERNEL_OCTAGON, "3");
        $canvas-&gt;morphology(\Imagick::MORPHOLOGY_ERODE, 2, $kernel);
        header("Content-Type: image/png");
        echo $canvas-&gt;getImageBlob();

?&gt;</pre> </div> </div> <div class="example" id="example-3735"> <p><strong>Example #4 Erode Intensity <span class="function"><strong>Imagick::morphology()</strong></span></strong></p> <div class="example-contents"> <pre class="phpcode" data-language="php">&lt;?php
        $canvas = $this-&gt;getCharacter();
        $kernel = \ImagickKernel::fromBuiltIn(\Imagick::KERNEL_OCTAGON, "1");
        $canvas-&gt;morphology(\Imagick::MORPHOLOGY_ERODE_INTENSITY, 2, $kernel);
        header("Content-Type: image/png");
        echo $canvas-&gt;getImageBlob();

?&gt;</pre> </div> </div> <div class="example" id="example-3736"> <p><strong>Example #5 Dilate <span class="function"><strong>Imagick::morphology()</strong></span></strong></p> <div class="example-contents"> <pre class="phpcode" data-language="php">&lt;?php
        $canvas = $this-&gt;getCharacterOutline();
        $kernel = \ImagickKernel::fromBuiltIn(\Imagick::KERNEL_OCTAGON, "3");
        $canvas-&gt;morphology(\Imagick::MORPHOLOGY_DILATE, 4, $kernel);
        header("Content-Type: image/png");
        echo $canvas-&gt;getImageBlob();

?&gt;</pre> </div> </div> <div class="example" id="example-3737"> <p><strong>Example #6 Dilate intensity <span class="function"><strong>Imagick::morphology()</strong></span></strong></p> <div class="example-contents"> <pre class="phpcode" data-language="php">&lt;?php
        $canvas = $this-&gt;getCharacter();
        $kernel = \ImagickKernel::fromBuiltIn(\Imagick::KERNEL_OCTAGON, "1");
        $canvas-&gt;morphology(\Imagick::MORPHOLOGY_DILATE_INTENSITY, 4, $kernel);
        header("Content-Type: image/png");
        echo $canvas-&gt;getImageBlob();

?&gt;</pre> </div> </div> <div class="example" id="example-3738"> <p><strong>Example #7 Distance with Chebyshev kernel <span class="function"><strong>Imagick::morphology()</strong></span></strong></p> <div class="example-contents"> <pre class="phpcode" data-language="php">&lt;?php
        $canvas = $this-&gt;getCharacterOutline();
        $kernel = \ImagickKernel::fromBuiltIn(\Imagick::KERNEL_CHEBYSHEV, "3");
        $canvas-&gt;morphology(\Imagick::MORPHOLOGY_DISTANCE, 3, $kernel);
        $canvas-&gt;autoLevelImage();
        header("Content-Type: image/png");
        echo $canvas-&gt;getImageBlob();

?&gt;</pre> </div> </div> <div class="example" id="example-3739"> <p><strong>Example #8 Distance with Manhattan kernel <span class="function"><strong>Imagick::morphology()</strong></span></strong></p> <div class="example-contents"> <pre class="phpcode" data-language="php">&lt;?php
        $canvas = $this-&gt;getCharacterOutline();
        $kernel = \ImagickKernel::fromBuiltIn(\Imagick::KERNEL_MANHATTAN, "5");
        $canvas-&gt;morphology(\Imagick::MORPHOLOGY_DISTANCE, 3, $kernel);
        $canvas-&gt;autoLevelImage();
        header("Content-Type: image/png");
        echo $canvas-&gt;getImageBlob();

?&gt;</pre> </div> </div> <div class="example" id="example-3740"> <p><strong>Example #9 Distance with ocatagonal kernel <span class="function"><strong>Imagick::morphology()</strong></span></strong></p> <div class="example-contents"> <pre class="phpcode" data-language="php">&lt;?php
        $canvas = $this-&gt;getCharacterOutline();
        $kernel = \ImagickKernel::fromBuiltIn(\Imagick::KERNEL_OCTAGONAL, "5");
        $canvas-&gt;morphology(\Imagick::MORPHOLOGY_DISTANCE, 3, $kernel);
        $canvas-&gt;autoLevelImage();
        header("Content-Type: image/png");
        echo $canvas-&gt;getImageBlob();

?&gt;</pre> </div> </div> <div class="example" id="example-3741"> <p><strong>Example #10 Distance with Euclidean kernel <span class="function"><strong>Imagick::morphology()</strong></span></strong></p> <div class="example-contents"> <pre class="phpcode" data-language="php">&lt;?php
        $canvas = $this-&gt;getCharacterOutline();
        $kernel = \ImagickKernel::fromBuiltIn(\Imagick::KERNEL_EUCLIDEAN, "4");
        $canvas-&gt;morphology(\Imagick::MORPHOLOGY_DISTANCE, 3, $kernel);
        $canvas-&gt;autoLevelImage();
        header("Content-Type: image/png");
        echo $canvas-&gt;getImageBlob();

?&gt;</pre> </div> </div> <div class="example" id="example-3742"> <p><strong>Example #11 Edge <span class="function"><strong>Imagick::morphology()</strong></span></strong></p> <div class="example-contents"> <pre class="phpcode" data-language="php">&lt;?php
        $canvas = $this-&gt;getCharacterOutline();
        $kernel = \ImagickKernel::fromBuiltIn(\Imagick::KERNEL_OCTAGON, "3");
        $canvas-&gt;morphology(\Imagick::MORPHOLOGY_EDGE, 1, $kernel);
        header("Content-Type: image/png");
        echo $canvas-&gt;getImageBlob();

?&gt;</pre> </div> </div> <div class="example" id="example-3743"> <p><strong>Example #12 Open <span class="function"><strong>Imagick::morphology()</strong></span></strong></p> <div class="example-contents"> <pre class="phpcode" data-language="php">&lt;?php
        // As a result you will see that 'Open' smoothed the outline, by rounding off any sharp points, and remove any parts that is smaller than the shape used. It will also disconnect or 'open' any thin bridges.
        $canvas = $this-&gt;getCharacterOutline();
        $kernel = \ImagickKernel::fromBuiltIn(\Imagick::KERNEL_DISK, "6");
        $canvas-&gt;morphology(\Imagick::MORPHOLOGY_OPEN, 1, $kernel);
        header("Content-Type: image/png");
        echo $canvas-&gt;getImageBlob();

?&gt;</pre> </div> </div> <div class="example" id="example-3744"> <p><strong>Example #13 Open intensity <span class="function"><strong>Imagick::morphology()</strong></span></strong></p> <div class="example-contents"> <pre class="phpcode" data-language="php">&lt;?php
        // As a result you will see that 'Open' smoothed the outline, by rounding off any sharp points, and remove any parts that is smaller than the shape used. It will also disconnect or 'open' any thin bridges.

        $canvas = $this-&gt;getCharacter();
        $kernel = \ImagickKernel::fromBuiltIn(\Imagick::KERNEL_DISK, "6");
        $canvas-&gt;morphology(\Imagick::MORPHOLOGY_OPEN_INTENSITY, 1, $kernel);
        header("Content-Type: image/png");
        echo $canvas-&gt;getImageBlob();

?&gt;</pre> </div> </div> <div class="example" id="example-3745"> <p><strong>Example #14 Close <span class="function"><strong>Imagick::morphology()</strong></span></strong></p> <div class="example-contents"> <pre class="phpcode" data-language="php">&lt;?php
        //The basic use of the 'Close' method is to reduce or remove any 'holes' or 'gaps' about the size of the kernel 'Structure Element'. That is 'close' parts of the background that are about that size.
        $canvas = $this-&gt;getCharacterOutline();
        $kernel = \ImagickKernel::fromBuiltIn(\Imagick::KERNEL_DISK, "6");
        $canvas-&gt;morphology(\Imagick::MORPHOLOGY_CLOSE, 1, $kernel);
        header("Content-Type: image/png");
        echo $canvas-&gt;getImageBlob();

?&gt;</pre> </div> </div> <div class="example" id="example-3746"> <p><strong>Example #15 Close Intensity <span class="function"><strong>Imagick::morphology()</strong></span></strong></p> <div class="example-contents"> <pre class="phpcode" data-language="php">&lt;?php
        //The basic use of the 'Close' method is to reduce or remove any 'holes' or 'gaps' about the size of the kernel 'Structure Element'. That is 'close' parts of the background that are about that size.
        $canvas = $this-&gt;getCharacter();
        $kernel = \ImagickKernel::fromBuiltIn(\Imagick::KERNEL_DISK, "6");
        $canvas-&gt;morphology(\Imagick::MORPHOLOGY_CLOSE_INTENSITY, 1, $kernel);
        header("Content-Type: image/png");
        echo $canvas-&gt;getImageBlob();

?&gt;</pre> </div> </div> <div class="example" id="example-3747"> <p><strong>Example #16 Smooth <span class="function"><strong>Imagick::morphology()</strong></span></strong></p> <div class="example-contents"> <pre class="phpcode" data-language="php">&lt;?php
        $canvas = $this-&gt;getCharacterOutline();
        $kernel = \ImagickKernel::fromBuiltIn(\Imagick::KERNEL_OCTAGON, "3");
        $canvas-&gt;morphology(\Imagick::MORPHOLOGY_SMOOTH, 1, $kernel);
        header("Content-Type: image/png");
        echo $canvas-&gt;getImageBlob();

?&gt;</pre> </div> </div> <div class="example" id="example-3748"> <p><strong>Example #17 Edge in <span class="function"><strong>Imagick::morphology()</strong></span></strong></p> <div class="example-contents"> <pre class="phpcode" data-language="php">&lt;?php
        $canvas = $this-&gt;getCharacterOutline();
        $kernel = \ImagickKernel::fromBuiltIn(\Imagick::KERNEL_OCTAGON, "3");
        $canvas-&gt;morphology(\Imagick::MORPHOLOGY_EDGE_IN, 1, $kernel);
        header("Content-Type: image/png");
        echo $canvas-&gt;getImageBlob();

?&gt;</pre> </div> </div> <div class="example" id="example-3749"> <p><strong>Example #18 Edge out <span class="function"><strong>Imagick::morphology()</strong></span></strong></p> <div class="example-contents"> <pre class="phpcode" data-language="php">&lt;?php
        $canvas = $this-&gt;getCharacterOutline();
        $kernel = \ImagickKernel::fromBuiltIn(\Imagick::KERNEL_OCTAGON, "3");
        $canvas-&gt;morphology(\Imagick::MORPHOLOGY_EDGE_OUT, 1, $kernel);
        header("Content-Type: image/png");
        echo $canvas-&gt;getImageBlob();

?&gt;</pre> </div> </div> <div class="example" id="example-3750"> <p><strong>Example #19 The 'TopHat' method, or more specifically 'White Top Hat', returns the pixels that were removed by a Opening of the shape, that is the pixels that were removed to round off the points, and the connecting bridged between shapes. <span class="function"><strong>Imagick::morphology()</strong></span></strong></p> <div class="example-contents"> <pre class="phpcode" data-language="php">&lt;?php
        $canvas = $this-&gt;getCharacterOutline();
        $kernel = \ImagickKernel::fromBuiltIn(\Imagick::KERNEL_DISK, "5");
        $canvas-&gt;morphology(\Imagick::MORPHOLOGY_TOP_HAT, 1, $kernel);
        header("Content-Type: image/png");
        echo $canvas-&gt;getImageBlob();

?&gt;</pre> </div> </div> <div class="example" id="example-3751"> <p><strong>Example #20 The 'BottomHat' method, also known as 'Black TopHat' is the pixels that a Closing of the shape adds to the image. That is the the pixels that were used to fill in the 'holes', 'gaps', and 'bridges'. <span class="function"><strong>Imagick::morphology()</strong></span></strong></p> <div class="example-contents"> <pre class="phpcode" data-language="php">&lt;?php

        $canvas = $this-&gt;getCharacterOutline();
        $kernel = \ImagickKernel::fromBuiltIn(\Imagick::KERNEL_DISK, "5");
        $canvas-&gt;morphology(\Imagick::MORPHOLOGY_BOTTOM_HAT, 1, $kernel);
        header("Content-Type: image/png");
        echo $canvas-&gt;getImageBlob();

?&gt;</pre> </div> </div> <div class="example" id="example-3752"> <p><strong>Example #21 Hit and Miss <span class="function"><strong>Imagick::morphology()</strong></span></strong></p> <div class="example-contents"> <pre class="phpcode" data-language="php">&lt;?php
        $canvas = $this-&gt;getCharacterOutline();
        //This finds all the pixels with 3 pixels of the right edge
        $matrix = [[1, false, false, 0]];
        $kernel = \ImagickKernel::fromMatrix(
            $matrix,
            [0, 0]
        );
        $canvas-&gt;morphology(\Imagick::MORPHOLOGY_HIT_AND_MISS, 1, $kernel);
        header("Content-Type: image/png");
        echo $canvas-&gt;getImageBlob();

?&gt;</pre> </div> </div> <div class="example" id="example-3753"> <p><strong>Example #22 Thinning <span class="function"><strong>Imagick::morphology()</strong></span></strong></p> <div class="example-contents"> <pre class="phpcode" data-language="php">&lt;?php
        $canvas = $this-&gt;getCharacterOutline();
        $leftEdgeKernel = \ImagickKernel::fromMatrix([[0, 1]], [1, 0]);
        $rightEdgeKernel = \ImagickKernel::fromMatrix([[1, 0]], [0, 0]);
        $leftEdgeKernel-&gt;addKernel($rightEdgeKernel);
        
        $canvas-&gt;morphology(\Imagick::MORPHOLOGY_THINNING, 3, $leftEdgeKernel);
        header("Content-Type: image/png");
        echo $canvas-&gt;getImageBlob();

?&gt;</pre> </div> </div> <div class="example" id="example-3754"> <p><strong>Example #23 Thicken <span class="function"><strong>Imagick::morphology()</strong></span></strong></p> <div class="example-contents"> <pre class="phpcode" data-language="php">&lt;?php
        $canvas = $this-&gt;getCharacterOutline();
        $leftEdgeKernel = \ImagickKernel::fromMatrix([[0, 1]], [1, 0]);
        $rightEdgeKernel = \ImagickKernel::fromMatrix([[1, 0]], [0, 0]);
        $leftEdgeKernel-&gt;addKernel($rightEdgeKernel);

        $canvas-&gt;morphology(\Imagick::MORPHOLOGY_THICKEN, 3, $leftEdgeKernel);
        header("Content-Type: image/png");
        echo $canvas-&gt;getImageBlob();

?&gt;</pre> </div> </div> <div class="example" id="example-3755"> <p><strong>Example #24 Thick to generate a convex hull <span class="function"><strong>Imagick::morphology()</strong></span></strong></p> <div class="example-contents"> <pre class="phpcode" data-language="php">&lt;?php
        $canvas = $this-&gt;getCharacterOutline();
        $diamondKernel = \ImagickKernel::fromBuiltIn(\Imagick::KERNEL_DIAMOND, "1");
        $convexKernel =  \ImagickKernel::fromBuiltIn(\Imagick::KERNEL_CONVEX_HULL, "");

        // The thicken morphology doesn't handle small gaps. We close them
        // with the close morphology.
        $canvas-&gt;morphology(\Imagick::MORPHOLOGY_CLOSE, 1, $diamondKernel);
        $canvas-&gt;morphology(\Imagick::MORPHOLOGY_THICKEN, -1, $convexKernel);
        $canvas-&gt;morphology(\Imagick::MORPHOLOGY_CLOSE, 1, $diamondKernel);

        header("Content-Type: image/png");
        echo $canvas-&gt;getImageBlob();

?&gt;</pre> </div> </div> <div class="example" id="example-3756"> <p><strong>Example #25 Iterative morphology <span class="function"><strong>Imagick::morphology()</strong></span></strong></p> <div class="example-contents"> <pre class="phpcode" data-language="php">&lt;?php
        $canvas = $this-&gt;getCharacterOutline();
        $kernel = \ImagickKernel::fromBuiltIn(\Imagick::KERNEL_DISK, "2");        
        $canvas-&gt;morphology(\Imagick::MORPHOLOGY_ITERATIVE, 3, $kernel);
        $canvas-&gt;autoLevelImage();
        header("Content-Type: image/png");
        echo $canvas-&gt;getImageBlob();

?&gt;</pre> </div> </div> <div class="example" id="example-3757"> <p><strong>Example #26 Helper functon to get an image silhouette <span class="function"><strong>Imagick::morphology()</strong></span></strong></p> <div class="example-contents"> <pre class="phpcode" data-language="php">&lt;?php
    private function getCharacterOutline() {

        $imagick = new \Imagick(realpath("./images/character.png"));
        $character = new \Imagick();
        $character-&gt;newPseudoImage(
            $imagick-&gt;getImageWidth(),
            $imagick-&gt;getImageHeight(),
            "canvas:white"
        );
        $canvas = new \Imagick();
        $canvas-&gt;newPseudoImage(
            $imagick-&gt;getImageWidth(),
            $imagick-&gt;getImageHeight(),
            "canvas:black"
        );

        $character-&gt;compositeimage(
            $imagick,
            \Imagick::COMPOSITE_COPYOPACITY,
            0, 0
        );
        $canvas-&gt;compositeimage(
            $character,
            \Imagick::COMPOSITE_ATOP,
            0, 0
        );
        $canvas-&gt;setFormat('png');

        return $canvas;
    }

?&gt;</pre> </div> </div> </div> <div class="manualnavbar" style="text-align: center;"> <div class="prev" style="text-align: left; float: left;"><a href="../imagick.morphimages/">← Imagick::morphImages</a></div> <div class="next" style="text-align: right; float: right;"><a href="../imagick.mosaicimages/">Imagick::mosaicImages →</a></div>   </div>
<div class="_attribution">
  <p class="_attribution-p">
    © 1997–2017 The PHP Documentation Group<br>Licensed under the Creative Commons Attribution License v3.0 or later.<br>
    <a href="https://secure.php.net/manual/en/imagick.morphology.php" class="_attribution-link" target="_blank">https://secure.php.net/manual/en/imagick.morphology.php</a>
  </p>
</div>

			</div>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
