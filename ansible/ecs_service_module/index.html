
<!DOCTYPE HTML>

<html lang="en">

<head>
  <meta charset="utf-8">
  <title>Ecs_service - Ansible - W3cubDocs</title>
  
  <meta name="description" content=" New in version 2.1. ">
  <meta name="keywords" content="ecs, service, -, create, terminate, start, or, stop, ansible">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="http://docs.w3cub.com/ansible/ecs_service_module/">
  <link href="/favicon.png" rel="icon">
  <link type="text/css" rel="stylesheet" href="/assets/application-e0f881b0fce8cbe96f33dadc355b7159d5d2912911231446d60eb8f9caffa802.css">
  <script type="text/javascript" src="/assets/application-8fc46316434047265cd383f02b8e7f434ed7dec4a59f920dd633deef8d488d1b.js"></script>
  <script src="/json/ansible.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body>
	<div class="_app">
	<header class="_header">
  
  <form class="_search">
    <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
    <a class="_search-clear"></a>
    <div class="_search-tag"></div>
  </form>
  
  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/ansible/" class="_nav-link" title="" style="margin-left:0;">Ansible</a></span>
  
  <nav class="_nav">
    <a href="/app/" class="_nav-link ">App</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		<div class="_list">
			
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<div class="_page _sphinx">
				
<h1 id="ecs-service">ecs_service - create, terminate, start or stop a service in ecs</h1> <div class="versionadded" id="ecs-service-create-terminate-start-or-stop-a-service-in-ecs"> <p><span class="versionmodified">New in version 2.1.</span></p> </div>  <ul class="simple"> <li><a class="reference internal" href="#synopsis" id="id1">Synopsis</a></li> <li><a class="reference internal" href="#requirements-on-host-that-executes-module" id="id2">Requirements (on host that executes module)</a></li> <li><a class="reference internal" href="#options" id="id3">Options</a></li> <li><a class="reference internal" href="#examples" id="id4">Examples</a></li> <li><a class="reference internal" href="#return-values" id="id5">Return Values</a></li> <li>
<a class="reference internal" href="#notes" id="id6">Notes</a><ul> <li><a class="reference internal" href="#status" id="id7">Status</a></li> </ul> </li> </ul>   <h2 id="synopsis">Synopsis</h2> <ul class="simple"> <li>Creates or terminates ecs services.</li> </ul>   <h2 id="requirements-on-host-that-executes-module">Requirements (on host that executes module)</h2>  <ul class="simple"> <li>boto</li> <li>boto3</li> <li>botocore</li> <li>json</li> <li>python &gt;= 2.6</li> </ul>    <h2 id="options">Options</h2> <table> <tr> <th class="head">parameter</th> <th class="head">required</th> <th class="head">default</th> <th class="head">choices</th> <th class="head">comments</th> </tr> <tr> <td>aws_access_key<br>
</td> <td>no</td> <td></td> <td></td> <td> <div>AWS access key. If not set then the value of the AWS_ACCESS_KEY_ID, AWS_ACCESS_KEY or EC2_ACCESS_KEY environment variable is used.</div> <div style="font-size: small;">aliases: ec2_access_key, access_key</div> </td> </tr> <tr> <td>aws_secret_key<br>
</td> <td>no</td> <td></td> <td></td> <td> <div>AWS secret key. If not set then the value of the AWS_SECRET_ACCESS_KEY, AWS_SECRET_KEY, or EC2_SECRET_KEY environment variable is used.</div> <div style="font-size: small;">aliases: ec2_secret_key, secret_key</div> </td> </tr> <tr> <td>client_token<br>
</td> <td>no</td> <td></td> <td></td> <td> <div>Unique, case-sensitive identifier you provide to ensure the idempotency of the request. Up to 32 ASCII characters are allowed.</div> </td> </tr> <tr> <td>cluster<br>
</td> <td>no</td> <td></td> <td></td> <td> <div>The name of the cluster in which the service exists</div> </td> </tr> <tr> <td>delay<br>
</td> <td>no</td> <td>10</td> <td></td> <td> <div>The time to wait before checking that the service is available</div> </td> </tr> <tr> <td>deployment_configuration<br><div style="font-size: small;">(added in 2.3)</div>
</td> <td>no</td> <td></td> <td></td> <td> <div>Optional parameters that control the deployment_configuration; format is '{"maximum_percent":&lt;integer&gt;, "minimum_healthy_percent":&lt;integer&gt;}</div> </td> </tr> <tr> <td>desired_count<br>
</td> <td>no</td> <td></td> <td></td> <td> <div>The count of how many instances of the service. This parameter is required when state=present</div> </td> </tr> <tr> <td>ec2_url<br>
</td> <td>no</td> <td></td> <td></td> <td> <div>Url to use to connect to EC2 or your Eucalyptus cloud (by default the module will use EC2 endpoints). Ignored for modules where region is required. Must be specified for all other modules if region is not used. If not set then the value of the EC2_URL environment variable, if any, is used.</div> </td> </tr> <tr> <td>load_balancers<br>
</td> <td>no</td> <td></td> <td></td> <td> <div>The list of ELBs defined for this service</div> </td> </tr> <tr> <td>name<br>
</td> <td>yes</td> <td></td> <td></td> <td> <div>The name of the service</div> </td> </tr> <tr> <td>placement_constraints<br><div style="font-size: small;">(added in 2.4)</div>
</td> <td>no</td> <td></td> <td></td> <td> <div>The placement constraints for the tasks in the service</div> </td> </tr> <tr> <td>placement_strategy<br><div style="font-size: small;">(added in 2.4)</div>
</td> <td>no</td> <td></td> <td></td> <td> <div>The placement strategy objects to use for tasks in your service. You can specify a maximum of 5 strategy rules per service</div> </td> </tr> <tr> <td>profile<br><div style="font-size: small;">(added in 1.6)</div>
</td> <td>no</td> <td></td> <td></td> <td> <div>Uses a boto profile. Only works with boto &gt;= 2.24.0.</div> </td> </tr> <tr> <td>region<br>
</td> <td>no</td> <td></td> <td></td> <td> <div>The AWS region to use. If not specified then the value of the AWS_REGION or EC2_REGION environment variable, if any, is used. See <a href="http://docs.aws.amazon.com/general/latest/gr/rande.html#ec2_region" target="_blank">http://docs.aws.amazon.com/general/latest/gr/rande.html#ec2_region</a>
</div> <div style="font-size: small;">aliases: aws_region, ec2_region</div> </td> </tr> <tr> <td>repeat<br>
</td> <td>no</td> <td>10</td> <td></td> <td> <div>The number of times to check that the service is available</div> </td> </tr> <tr> <td>role<br>
</td> <td>no</td> <td></td> <td></td> <td> <div>The name or full Amazon Resource Name (ARN) of the IAM role that allows your Amazon ECS container agent to make calls to your load balancer on your behalf. This parameter is only required if you are using a load balancer with your service.</div> </td> </tr> <tr> <td>security_token<br><div style="font-size: small;">(added in 1.6)</div>
</td> <td>no</td> <td></td> <td></td> <td> <div>AWS STS security token. If not set then the value of the AWS_SECURITY_TOKEN or EC2_SECURITY_TOKEN environment variable is used.</div> <div style="font-size: small;">aliases: access_token</div> </td> </tr> <tr> <td>state<br>
</td> <td>yes</td> <td></td> <td><ul>
<li>present</li>
<li>absent</li>
<li>deleting</li>
</ul></td> <td> <div>The desired state of the service</div> </td> </tr> <tr> <td>task_definition<br>
</td> <td>no</td> <td></td> <td></td> <td> <div>The task definition the service will run. This parameter is required when state=present</div> </td> </tr> <tr> <td>validate_certs<br><div style="font-size: small;">(added in 1.5)</div>
</td> <td>no</td> <td>yes</td> <td><ul>
<li>yes</li>
<li>no</li>
</ul></td> <td> <div>When set to "no", SSL certificates will not be validated for boto versions &gt;= 2.6.0.</div> </td> </tr> </table>   <h2 id="examples">Examples</h2>  <pre data-language="YAML"># Note: These examples do not set authentication details, see the AWS Guide for details.
- ecs_service:
    state: present
    name: console-test-service
    cluster: new_cluster
    task_definition: 'new_cluster-task:1'
    desired_count: 0

# Basic provisioning example
- ecs_service:
    name: default
    state: present
    cluster: new_cluster

# Simple example to delete
- ecs_service:
    name: default
    state: absent
    cluster: new_cluster

# With custom deployment configuration (added in version 2.3), placement constraints and strategy (added in version 2.4)
- ecs_service:
    state: present
    name: test-service
    cluster: test-cluster
    task_definition: test-task-definition
    desired_count: 3
    deployment_configuration:
      minimum_healthy_percent: 75
      maximum_percent: 150
    placement_constraints:
      - type: memberOf
        expression: 'attribute:flavor==test'
    placement_strategy:
      - type: binpack
        field: memory
</pre>    <h2 id="return-values">Return Values</h2> <p>Common return values are documented here <a class="reference internal" href="../common_return_values/"><span class="doc">Return Values</span></a>, the following are the fields unique to this module:</p> <table> <tr> <th class="head">name</th> <th class="head">description</th> <th class="head">returned</th> <th class="head">type</th> <th class="head">sample</th> </tr> <tr> <td>ansible_facts</td> <td> <div>Facts about deleted service.</div> </td> <td align="center">when deleting a service</td> <td align="center">complex</td> <td align="center"></td> </tr> <tr> <td>contains:</td> <td colspan="4"> <table> <tr> <th class="head">name</th> <th class="head">description</th> <th class="head">returned</th> <th class="head">type</th> <th class="head">sample</th> </tr> <tr> <td>service</td> <td> <div>Details of deleted service in the same structure described above for service creation.</div> </td> <td align="center">when service existed and was deleted</td> <td align="center">complex</td> <td align="center"></td> </tr> </table> </td> </tr> <tr> <td>service</td> <td> <div>Details of created service.</div> </td> <td align="center">when creating a service</td> <td align="center">complex</td> <td align="center"></td> </tr> <tr> <td>contains:</td> <td colspan="4"> <table> <tr> <th class="head">name</th> <th class="head">description</th> <th class="head">returned</th> <th class="head">type</th> <th class="head">sample</th> </tr> <tr> <td>status</td> <td> <div>The valid values are ACTIVE, DRAINING, or INACTIVE.</div> </td> <td align="center">always</td> <td align="center">string</td> <td align="center"></td> </tr> <tr> <td>pendingCount</td> <td> <div>The number of tasks in the cluster that are in the PENDING state.</div> </td> <td align="center">always</td> <td align="center">int</td> <td align="center"></td> </tr> <tr> <td>loadBalancers</td> <td> <div>A list of load balancer objects</div> </td> <td align="center">always</td> <td align="center">complex</td> <td align="center"></td> </tr> <tr> <td>placementConstraints</td> <td> <div>List of placement constraints objects</div> </td> <td align="center">always</td> <td align="center">list of complex</td> <td align="center"></td> </tr> <tr> <td>desiredCount</td> <td> <div>The desired number of instantiations of the task definition to keep running on the service.</div> </td> <td align="center">always</td> <td align="center">int</td> <td align="center"></td> </tr> <tr> <td>runningCount</td> <td> <div>The number of tasks in the cluster that are in the RUNNING state.</div> </td> <td align="center">always</td> <td align="center">int</td> <td align="center"></td> </tr> <tr> <td>serviceName</td> <td> <div>A user-generated string used to identify the service</div> </td> <td align="center">always</td> <td align="center">string</td> <td align="center"></td> </tr> <tr> <td>clusterArn</td> <td> <div>The Amazon Resource Name (ARN) of the of the cluster that hosts the service.</div> </td> <td align="center">always</td> <td align="center">string</td> <td align="center"></td> </tr> <tr> <td>serviceArn</td> <td> <div>The Amazon Resource Name (ARN) that identifies the service. The ARN contains the arn:aws:ecs namespace, followed by the region of the service, the AWS account ID of the service owner, the service namespace, and then the service name. For example, arn:aws:ecs:region :012345678910 :service/my-service .</div> </td> <td align="center">always</td> <td align="center">string</td> <td align="center"></td> </tr> <tr> <td>deploymentConfiguration</td> <td> <div>dictionary of deploymentConfiguration</div> </td> <td align="center">always</td> <td align="center">complex</td> <td align="center"></td> </tr> <tr> <td>deployments</td> <td> <div>list of service deployments</div> </td> <td align="center">always</td> <td align="center">list of complex</td> <td align="center"></td> </tr> <tr> <td>events</td> <td> <div>list of service events</div> </td> <td align="center">always</td> <td align="center">list of complex</td> <td align="center"></td> </tr> <tr> <td>taskDefinition</td> <td> <div>The ARN of a task definition to use for tasks in the service.</div> </td> <td align="center">always</td> <td align="center">string</td> <td align="center"></td> </tr> <tr> <td>placementStrategy</td> <td> <div>List of placement strategy objects</div> </td> <td align="center">always</td> <td align="center">list of complex</td> <td align="center"></td> </tr> </table> </td> </tr> </table>   <h2 id="notes">Notes</h2> <div class="admonition note"> <p class="first admonition-title">Note</p> <ul class="last simple"> <li>the service role specified must be assumable (i.e. have a trust relationship for the ecs service, ecs.amazonaws.com)</li> <li>for details of the parameters and returns see <a class="reference external" href="http://boto3.readthedocs.org/en/latest/reference/services/ecs.html" target="_blank">http://boto3.readthedocs.org/en/latest/reference/services/ecs.html</a>
</li> <li>An IAM role must have been previously created</li> <li>If parameters are not set within the module, the following environment variables can be used in decreasing order of precedence <code>AWS_URL</code> or <code>EC2_URL</code>, <code>AWS_ACCESS_KEY_ID</code> or <code>AWS_ACCESS_KEY</code> or <code>EC2_ACCESS_KEY</code>, <code>AWS_SECRET_ACCESS_KEY</code> or <code>AWS_SECRET_KEY</code> or <code>EC2_SECRET_KEY</code>, <code>AWS_SECURITY_TOKEN</code> or <code>EC2_SECURITY_TOKEN</code>, <code>AWS_REGION</code> or <code>EC2_REGION</code>
</li> <li>Ansible uses the boto configuration file (typically ~/.boto) if no credentials are provided. See <a class="reference external" href="http://boto.readthedocs.org/en/latest/boto_config_tut.html" target="_blank">http://boto.readthedocs.org/en/latest/boto_config_tut.html</a>
</li> <li>
<code>AWS_REGION</code> or <code>EC2_REGION</code> can be typically be used to specify the AWS region, when required, but this can also be configured in the boto config file</li> </ul> </div>  <h3 id="status">Status</h3> <p>This module is flagged as <strong>preview</strong> which means that it is not guaranteed to have a backwards compatible interface.</p> <p>For help in developing on modules, should you be so inclined, please read <a class="reference internal" href="https://docs.ansible.com/ansible/latest/community.html" target="_blank"><span class="doc">Community Information &amp; Contributing</span></a>, <a class="reference internal" href="../dev_guide/testing/"><span class="doc">Testing Ansible</span></a> and <a class="reference internal" href="../dev_guide/developing_modules/"><span class="doc">Developing Modules</span></a>.</p>
<div class="_attribution">
  <p class="_attribution-p">
    © 2012–2017 Michael DeHaan<br>© 2017 Red Hat, Inc.<br>Licensed under the GNU General Public License version 3.<br>
    <a href="https://docs.ansible.com/ansible/latest/ecs_service_module.html" class="_attribution-link" target="_blank">https://docs.ansible.com/ansible/latest/ecs_service_module.html</a>
  </p>
</div>

			</div>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
