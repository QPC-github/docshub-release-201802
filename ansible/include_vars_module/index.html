
<!DOCTYPE HTML>

<html lang="en">

<head>
  <meta charset="utf-8">
  <title>Include_vars - Ansible - W3cubDocs</title>
  
  <meta name="description" content=" New in version 1.4. ">
  <meta name="keywords" content="include, vars, -, load, variables, from, files, dynamically, within, task, ansible">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="http://docs.w3cub.com/ansible/include_vars_module/">
  <link href="/favicon.png" rel="icon">
  <link type="text/css" rel="stylesheet" href="/assets/application-e0f881b0fce8cbe96f33dadc355b7159d5d2912911231446d60eb8f9caffa802.css">
  <script type="text/javascript" src="/assets/application-8fc46316434047265cd383f02b8e7f434ed7dec4a59f920dd633deef8d488d1b.js"></script>
  <script src="/json/ansible.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body>
	<div class="_app">
	<header class="_header">
  
  <form class="_search">
    <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
    <a class="_search-clear"></a>
    <div class="_search-tag"></div>
  </form>
  
  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/ansible/" class="_nav-link" title="" style="margin-left:0;">Ansible</a></span>
  
  <nav class="_nav">
    <a href="/app/" class="_nav-link ">App</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		<div class="_list">
			
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<div class="_page _sphinx">
				
<h1 id="include-vars">include_vars - Load variables from files, dynamically within a task.</h1> <div class="versionadded" id="include-vars-load-variables-from-files-dynamically-within-a-task"> <p><span class="versionmodified">New in version 1.4.</span></p> </div>  <ul class="simple"> <li><a class="reference internal" href="#synopsis" id="id1">Synopsis</a></li> <li><a class="reference internal" href="#options" id="id2">Options</a></li> <li><a class="reference internal" href="#examples" id="id3">Examples</a></li> <li><a class="reference internal" href="#return-values" id="id4">Return Values</a></li> <li>
<a class="reference internal" href="#notes" id="id5">Notes</a><ul> <li><a class="reference internal" href="#status" id="id6">Status</a></li> <li><a class="reference internal" href="#maintenance-info" id="id7">Maintenance Info</a></li> </ul> </li> </ul>   <h2 id="synopsis">Synopsis</h2> <ul class="simple"> <li>Loads variables from a YAML/JSON files dynamically from within a file or from a directory recursively during task runtime. If loading a directory, the files are sorted alphabetically before being loaded.</li> <li>This module is also supported for Windows targets.</li> </ul>   <h2 id="options">Options</h2> <table> <tr> <th class="head">parameter</th> <th class="head">required</th> <th class="head">default</th> <th class="head">choices</th> <th class="head">comments</th> </tr> <tr> <td>depth<br><div style="font-size: small;">(added in 2.2)</div>
</td> <td>no</td> <td></td> <td></td> <td> <div>When using <code>dir</code>, this module will, by default, recursively go through each sub directory and load up the variables. By explicitly setting the depth, this module will only go as deep as the depth.</div> </td> </tr> <tr> <td>dir<br><div style="font-size: small;">(added in 2.2)</div>
</td> <td>no</td> <td></td> <td></td> <td> <div>The directory name from which the variables should be loaded.</div> <div>If the path is relative, it will look for the file in vars/ subdirectory of a role or relative to playbook.</div> </td> </tr> <tr> <td>extensions<br><div style="font-size: small;">(added in 2.3)</div>
</td> <td>no</td> <td>[u'yaml', u'yml', u'json']</td> <td></td> <td> <div>List of file extensions to read when using <code>dir</code>.</div> </td> </tr> <tr> <td>file<br><div style="font-size: small;">(added in 2.2)</div>
</td> <td>no</td> <td></td> <td></td> <td> <div>The file name from which variables should be loaded.</div> <div>If the path is relative, it will look for the file in vars/ subdirectory of a role or relative to playbook.</div> </td> </tr> <tr> <td>files_matching<br><div style="font-size: small;">(added in 2.2)</div>
</td> <td>no</td> <td></td> <td></td> <td> <div>Limit the files that are loaded within any directory to this regular expression.</div> </td> </tr> <tr> <td>free-form<br>
</td> <td>no</td> <td></td> <td></td> <td> <div>This module allows you to specify the 'file' option directly w/o any other options. There is no 'free-form' option, this is just an indicator, see example below.</div> </td> </tr> <tr> <td>ignore_files<br><div style="font-size: small;">(added in 2.2)</div>
</td> <td>no</td> <td></td> <td></td> <td> <div>List of file names to ignore.</div> </td> </tr> <tr> <td>name<br><div style="font-size: small;">(added in 2.2)</div>
</td> <td>no</td> <td></td> <td></td> <td> <div>The name of a variable into which assign the included vars, if omitted (null) they will be made top level vars.</div> </td> </tr> </table>   <h2 id="examples">Examples</h2>  <pre data-language="YAML">- name: Include vars of stuff.yml into the 'stuff' variable (2.2).
  include_vars:
    file: stuff.yml
    name: stuff

- name: Conditionally decide to load in variables into 'plans' when x is 0, otherwise do not. (2.2)
  include_vars:
    file: contingency_plan.yml
    name: plans
  when: x == 0

- name: Load a variable file based on the OS type, or a default if not found. Using free-form to specify the file.
  include_vars: "{{ item }}"
  with_first_found:
    - "{{ ansible_distribution }}.yml"
    - "{{ ansible_os_family }}.yml"
    - "default.yml"

- name: bare include (free-form)
  include_vars: myvars.yml

- name: Include all .json and .jsn files in vars/all and all nested directories (2.3)
  include_vars:
    dir: 'vars/all'
    extensions:
        - json
        - jsn

- name: Include all default extension files in vars/all and all nested directories and save the output in test. (2.2)
  include_vars:
    dir: 'vars/all'
    name: test

- name: Include default extension files in vars/services (2.2)
  include_vars:
    dir: 'vars/services'
    depth: 1

- name: Include only files matching bastion.yml (2.2)
  include_vars:
    dir: 'vars'
    files_matching: 'bastion.yml'

- name: Include all .yml files except bastion.yml (2.3)
  include_vars:
    dir: 'vars'
    ignore_files: 'bastion.yml'
    extensions: ['yml']
</pre>    <h2 id="return-values">Return Values</h2> <p>Common return values are documented here <a class="reference internal" href="../common_return_values/"><span class="doc">Return Values</span></a>, the following are the fields unique to this module:</p> <table> <tr> <th class="head">name</th> <th class="head">description</th> <th class="head">returned</th> <th class="head">type</th> <th class="head">sample</th> </tr> <tr> <td>ansible_included_var_files</td> <td> <div>A list of files that were successfully included</div> </td> <td align="center">success</td> <td align="center">list</td> <td align="center">['/path/to/file.yml', '/path/to/file.json']</td> </tr> <tr> <td>ansible_facts</td> <td> <div>Variables that were included and their values</div> </td> <td align="center">success</td> <td align="center">dict</td> <td align="center">{'variable': 'value'}</td> </tr> </table>   <h2 id="notes">Notes</h2> <div class="admonition note"> <p class="first admonition-title">Note</p> <ul class="last simple"> <li>This module is also supported for Windows targets.</li> </ul> </div>  <h3 id="status">Status</h3> <p>This module is flagged as <strong>stableinterface</strong> which means that the maintainers for this module guarantee that no backward incompatible interface changes will be made.</p>   <h3 id="maintenance-info">Maintenance Info</h3> <p>For more information about Red Hat’s this support of this module, please refer to this <code>knowledge base article&lt;https://access.redhat.com/articles/rhel-top-support-policies&gt;</code></p> <p>For help in developing on modules, should you be so inclined, please read <a class="reference internal" href="https://docs.ansible.com/ansible/latest/community.html" target="_blank"><span class="doc">Community Information &amp; Contributing</span></a>, <a class="reference internal" href="../dev_guide/testing/"><span class="doc">Testing Ansible</span></a> and <a class="reference internal" href="../dev_guide/developing_modules/"><span class="doc">Developing Modules</span></a>.</p>
<div class="_attribution">
  <p class="_attribution-p">
    © 2012–2017 Michael DeHaan<br>© 2017 Red Hat, Inc.<br>Licensed under the GNU General Public License version 3.<br>
    <a href="https://docs.ansible.com/ansible/latest/include_vars_module.html" class="_attribution-link" target="_blank">https://docs.ansible.com/ansible/latest/include_vars_module.html</a>
  </p>
</div>

			</div>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
