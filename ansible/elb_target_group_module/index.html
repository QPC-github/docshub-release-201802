
<!DOCTYPE HTML>

<html lang="en">

<head>
  <meta charset="utf-8">
  <title>Elb_target_group - Ansible - W3cubDocs</title>
  
  <meta name="description" content=" New in version 2.4. ">
  <meta name="keywords" content="elb, target, group, -, manage, for, application, load, balancer, ansible">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="http://docs.w3cub.com/ansible/elb_target_group_module/">
  <link href="/favicon.png" rel="icon">
  <link type="text/css" rel="stylesheet" href="/assets/application-e0f881b0fce8cbe96f33dadc355b7159d5d2912911231446d60eb8f9caffa802.css">
  <script type="text/javascript" src="/assets/application-8fc46316434047265cd383f02b8e7f434ed7dec4a59f920dd633deef8d488d1b.js"></script>
  <script src="/json/ansible.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body>
	<div class="_app">
	<header class="_header">
  
  <form class="_search">
    <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
    <a class="_search-clear"></a>
    <div class="_search-tag"></div>
  </form>
  
  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/ansible/" class="_nav-link" title="" style="margin-left:0;">Ansible</a></span>
  
  <nav class="_nav">
    <a href="/app/" class="_nav-link ">App</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		<div class="_list">
			
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<div class="_page _sphinx">
				
<h1 id="elb-target-group">elb_target_group - Manage a target group for an Application load balancer</h1> <div class="versionadded" id="elb-target-group-manage-a-target-group-for-an-application-load-balancer"> <p><span class="versionmodified">New in version 2.4.</span></p> </div>  <ul class="simple"> <li><a class="reference internal" href="#synopsis" id="id1">Synopsis</a></li> <li><a class="reference internal" href="#requirements-on-host-that-executes-module" id="id2">Requirements (on host that executes module)</a></li> <li><a class="reference internal" href="#options" id="id3">Options</a></li> <li><a class="reference internal" href="#examples" id="id4">Examples</a></li> <li><a class="reference internal" href="#return-values" id="id5">Return Values</a></li> <li>
<a class="reference internal" href="#notes" id="id6">Notes</a><ul> <li><a class="reference internal" href="#status" id="id7">Status</a></li> </ul> </li> </ul>   <h2 id="synopsis">Synopsis</h2> <ul class="simple"> <li>Manage an AWS Application Elastic Load Balancer target group. See <a class="reference external" href="http://docs.aws.amazon.com/elasticloadbalancing/latest/application/load-balancer-target-groups.html" target="_blank">http://docs.aws.amazon.com/elasticloadbalancing/latest/application/load-balancer-target-groups.html</a> for details.</li> </ul>   <h2 id="requirements-on-host-that-executes-module">Requirements (on host that executes module)</h2>  <ul class="simple"> <li>python &gt;= 2.6</li> <li>boto</li> </ul>    <h2 id="options">Options</h2> <table> <tr> <th class="head">parameter</th> <th class="head">required</th> <th class="head">default</th> <th class="head">choices</th> <th class="head">comments</th> </tr> <tr> <td>aws_access_key<br>
</td> <td>no</td> <td></td> <td></td> <td> <div>AWS access key. If not set then the value of the AWS_ACCESS_KEY_ID, AWS_ACCESS_KEY or EC2_ACCESS_KEY environment variable is used.</div> <div style="font-size: small;">aliases: ec2_access_key, access_key</div> </td> </tr> <tr> <td>aws_secret_key<br>
</td> <td>no</td> <td></td> <td></td> <td> <div>AWS secret key. If not set then the value of the AWS_SECRET_ACCESS_KEY, AWS_SECRET_KEY, or EC2_SECRET_KEY environment variable is used.</div> <div style="font-size: small;">aliases: ec2_secret_key, secret_key</div> </td> </tr> <tr> <td>deregistration_delay_timeout<br>
</td> <td>no</td> <td></td> <td></td> <td> <div>The amount time for Elastic Load Balancing to wait before changing the state of a deregistering target from draining to unused. The range is 0-3600 seconds.</div> </td> </tr> <tr> <td>ec2_url<br>
</td> <td>no</td> <td></td> <td></td> <td> <div>Url to use to connect to EC2 or your Eucalyptus cloud (by default the module will use EC2 endpoints). Ignored for modules where region is required. Must be specified for all other modules if region is not used. If not set then the value of the EC2_URL environment variable, if any, is used.</div> </td> </tr> <tr> <td>health_check_interval<br>
</td> <td>no</td> <td></td> <td></td> <td> <div>The approximate amount of time, in seconds, between health checks of an individual target.</div> </td> </tr> <tr> <td>health_check_path<br>
</td> <td>no</td> <td></td> <td></td> <td> <div>The ping path that is the destination on the targets for health checks. The path must be defined in order to set a health check.</div> </td> </tr> <tr> <td>health_check_port<br>
</td> <td>no</td> <td>The port on which each target receives traffic from the load balancer.</td> <td></td> <td> <div>The port the load balancer uses when performing health checks on targets.</div> </td> </tr> <tr> <td>health_check_protocol<br>
</td> <td>no</td> <td></td> <td><ul>
<li>http</li>
<li>https</li>
</ul></td> <td> <div>The protocol the load balancer uses when performing health checks on targets.</div> </td> </tr> <tr> <td>health_check_timeout<br>
</td> <td>no</td> <td></td> <td></td> <td> <div>The amount of time, in seconds, during which no response from a target means a failed health check.</div> </td> </tr> <tr> <td>healthy_threshold_count<br>
</td> <td>no</td> <td></td> <td></td> <td> <div>The number of consecutive health checks successes required before considering an unhealthy target healthy.</div> </td> </tr> <tr> <td>modify_targets<br>
</td> <td>no</td> <td>True</td> <td></td> <td> <div>Whether or not to alter existing targets in the group to match what is passed with the module</div> </td> </tr> <tr> <td>name<br>
</td> <td>yes</td> <td></td> <td></td> <td> <div>The name of the target group.</div> </td> </tr> <tr> <td>port<br>
</td> <td>no</td> <td></td> <td></td> <td> <div>The port on which the targets receive traffic. This port is used unless you specify a port override when registering the target. Required if <em>state</em> is <code>present</code>.</div> </td> </tr> <tr> <td>profile<br><div style="font-size: small;">(added in 1.6)</div>
</td> <td>no</td> <td></td> <td></td> <td> <div>Uses a boto profile. Only works with boto &gt;= 2.24.0.</div> </td> </tr> <tr> <td>protocol<br>
</td> <td>no</td> <td></td> <td><ul>
<li>http</li>
<li>https</li>
</ul></td> <td> <div>The protocol to use for routing traffic to the targets. Required when <em>state</em> is <code>present</code>.</div> </td> </tr> <tr> <td>purge_tags<br>
</td> <td>no</td> <td>True</td> <td><ul>
<li>yes</li>
<li>no</li>
</ul></td> <td> <div>If yes, existing tags will be purged from the resource to match exactly what is defined by <em>tags</em> parameter. If the tag parameter is not set then tags will not be modified.</div> </td> </tr> <tr> <td>region<br>
</td> <td>no</td> <td></td> <td></td> <td> <div>The AWS region to use. If not specified then the value of the AWS_REGION or EC2_REGION environment variable, if any, is used. See <a href="http://docs.aws.amazon.com/general/latest/gr/rande.html#ec2_region" target="_blank">http://docs.aws.amazon.com/general/latest/gr/rande.html#ec2_region</a>
</div> <div style="font-size: small;">aliases: aws_region, ec2_region</div> </td> </tr> <tr> <td>security_token<br><div style="font-size: small;">(added in 1.6)</div>
</td> <td>no</td> <td></td> <td></td> <td> <div>AWS STS security token. If not set then the value of the AWS_SECURITY_TOKEN or EC2_SECURITY_TOKEN environment variable is used.</div> <div style="font-size: small;">aliases: access_token</div> </td> </tr> <tr> <td>state<br>
</td> <td>yes</td> <td></td> <td><ul>
<li>present</li>
<li>absent</li>
</ul></td> <td> <div>Create or destroy the target group.</div> </td> </tr> <tr> <td>stickiness_enabled<br>
</td> <td>no</td> <td></td> <td><ul>
<li>yes</li>
<li>no</li>
</ul></td> <td> <div>Indicates whether sticky sessions are enabled.</div> </td> </tr> <tr> <td>stickiness_lb_cookie_duration<br>
</td> <td>no</td> <td></td> <td></td> <td> <div>The time period, in seconds, during which requests from a client should be routed to the same target. After this time period expires, the load balancer-generated cookie is considered stale. The range is 1 second to 1 week (604800 seconds).</div> </td> </tr> <tr> <td>stickiness_type<br>
</td> <td>no</td> <td>lb_cookie</td> <td></td> <td> <div>The type of sticky sessions. The possible value is lb_cookie.</div> </td> </tr> <tr> <td>successful_response_codes<br>
</td> <td>no</td> <td></td> <td></td> <td> <div>The HTTP codes to use when checking for a successful response from a target. You can specify multiple values (for example, "200,202") or a range of values (for example, "200-299"). </div> </td> </tr> <tr> <td>tags<br>
</td> <td>no</td> <td></td> <td></td> <td> <div>A dictionary of one or more tags to assign to the target group.</div> </td> </tr> <tr> <td>targets<br>
</td> <td>no</td> <td></td> <td></td> <td> <div>A list of targets to assign to the target group. This parameter defaults to an empty list. Unless you set the 'modify_targets' parameter then all existing targets will be removed from the group. The list should be an Id and a Port parameter. See the Examples for detail.</div> </td> </tr> <tr> <td>unhealthy_threshold_count<br>
</td> <td>no</td> <td></td> <td></td> <td> <div>The number of consecutive health check failures required before considering a target unhealthy.</div> </td> </tr> <tr> <td>validate_certs<br><div style="font-size: small;">(added in 1.5)</div>
</td> <td>no</td> <td>yes</td> <td><ul>
<li>yes</li>
<li>no</li>
</ul></td> <td> <div>When set to "no", SSL certificates will not be validated for boto versions &gt;= 2.6.0.</div> </td> </tr> <tr> <td>vpc_id<br>
</td> <td>no</td> <td></td> <td></td> <td> <div>The identifier of the virtual private cloud (VPC). Required when <em>state</em> is <code>present</code>.</div> </td> </tr> </table>   <h2 id="examples">Examples</h2>  <pre data-language="YAML"># Note: These examples do not set authentication details, see the AWS Guide for details.

# Create a target group with a default health check
- elb_target_group:
    name: mytargetgroup
    protocol: http
    port: 80
    vpc_id: vpc-01234567
    state: present

# Modify the target group with a custom health check
- elb_target_group:
    name: mytargetgroup
    protocol: http
    port: 80
    vpc_id: vpc-01234567
    health_check_path: /
    successful_response_codes: "200, 250-260"
    state: present

# Delete a target group
- elb_target_group:
    name: mytargetgroup
    state: absent

# Create a target group with targets
- elb_target_group:
  name: mytargetgroup
  protocol: http
  port: 81
  vpc_id: vpc-01234567
  health_check_path: /
  successful_response_codes: "200,250-260"
  targets:
    - Id: i-01234567
      Port: 80
    - Id: i-98765432
      Port: 80
  state: present
  wait_timeout: 200
  wait: True
</pre>    <h2 id="return-values">Return Values</h2> <p>Common return values are documented here <a class="reference internal" href="../common_return_values/"><span class="doc">Return Values</span></a>, the following are the fields unique to this module:</p> <table> <tr> <th class="head">name</th> <th class="head">description</th> <th class="head">returned</th> <th class="head">type</th> <th class="head">sample</th> </tr> <tr> <td>protocol</td> <td> <div>The protocol to use for routing traffic to the targets.</div> </td> <td align="center">when state present</td> <td align="center">string</td> <td align="center">HTTP</td> </tr> <tr> <td>tags</td> <td> <div>The tags attached to the target group.</div> </td> <td align="center">when state present</td> <td align="center">dict</td> <td align="center">{ 'Tag': 'Example' }</td> </tr> <tr> <td>matcher</td> <td> <div>The HTTP codes to use when checking for a successful response from a target.</div> </td> <td align="center">when state present</td> <td align="center">dict</td> <td align="center">{'http_code': '200'}</td> </tr> <tr> <td>health_check_port</td> <td> <div>The port to use to connect with the target.</div> </td> <td align="center">when state present</td> <td align="center">string</td> <td align="center">traffic-port</td> </tr> <tr> <td>target_group_name</td> <td> <div>The name of the target group.</div> </td> <td align="center">when state present</td> <td align="center">string</td> <td align="center">mytargetgroup</td> </tr> <tr> <td>target_group_arn</td> <td> <div>The Amazon Resource Name (ARN) of the target group.</div> </td> <td align="center">when state present</td> <td align="center">string</td> <td align="center">arn:aws:elasticloadbalancing:ap-southeast-2:01234567890:targetgroup/mytargetgroup/aabbccddee0044332211</td> </tr> <tr> <td>deregistration_delay_timeout_seconds</td> <td> <div>The amount time for Elastic Load Balancing to wait before changing the state of a deregistering target from draining to unused.</div> </td> <td align="center">when state present</td> <td align="center">int</td> <td align="center">300</td> </tr> <tr> <td>healthy_threshold_count</td> <td> <div>The number of consecutive health checks successes required before considering an unhealthy target healthy.</div> </td> <td align="center">when state present</td> <td align="center">int</td> <td align="center">5</td> </tr> <tr> <td>port</td> <td> <div>The port on which the targets are listening.</div> </td> <td align="center">when state present</td> <td align="center">int</td> <td align="center">80</td> </tr> <tr> <td>load_balancer_arns</td> <td> <div>The Amazon Resource Names (ARN) of the load balancers that route traffic to this target group.</div> </td> <td align="center">when state present</td> <td align="center">list</td> <td align="center">[]</td> </tr> <tr> <td>health_check_protocol</td> <td> <div>The protocol to use to connect with the target.</div> </td> <td align="center">when state present</td> <td align="center">string</td> <td align="center">HTTP</td> </tr> <tr> <td>unhealthy_threshold_count</td> <td> <div>The number of consecutive health check failures required before considering the target unhealthy.</div> </td> <td align="center">when state present</td> <td align="center">int</td> <td align="center">2</td> </tr> <tr> <td>stickiness_type</td> <td> <div>The type of sticky sessions.</div> </td> <td align="center">when state present</td> <td align="center">string</td> <td align="center">lb_cookie</td> </tr> <tr> <td>health_check_timeout_seconds</td> <td> <div>The amount of time, in seconds, during which no response means a failed health check.</div> </td> <td align="center">when state present</td> <td align="center">int</td> <td align="center">5</td> </tr> <tr> <td>stickiness_lb_cookie_duration_seconds</td> <td> <div>The time period, in seconds, during which requests from a client should be routed to the same target.</div> </td> <td align="center">when state present</td> <td align="center">int</td> <td align="center">86400</td> </tr> <tr> <td>stickiness_enabled</td> <td> <div>Indicates whether sticky sessions are enabled.</div> </td> <td align="center">when state present</td> <td align="center">bool</td> <td align="center">True</td> </tr> <tr> <td>health_check_path</td> <td> <div>The destination for the health check request.</div> </td> <td align="center">when state present</td> <td align="center">string</td> <td align="center">/index.html</td> </tr> <tr> <td>vpc_id</td> <td> <div>The ID of the VPC for the targets.</div> </td> <td align="center">when state present</td> <td align="center">string</td> <td align="center">vpc-0123456</td> </tr> <tr> <td>health_check_interval_seconds</td> <td> <div>The approximate amount of time, in seconds, between health checks of an individual target.</div> </td> <td align="center">when state present</td> <td align="center">int</td> <td align="center">30</td> </tr> </table>   <h2 id="notes">Notes</h2> <div class="admonition note"> <p class="first admonition-title">Note</p> <ul class="last simple"> <li>Once a target group has been created, only its health check can then be modified using subsequent calls</li> <li>If parameters are not set within the module, the following environment variables can be used in decreasing order of precedence <code>AWS_URL</code> or <code>EC2_URL</code>, <code>AWS_ACCESS_KEY_ID</code> or <code>AWS_ACCESS_KEY</code> or <code>EC2_ACCESS_KEY</code>, <code>AWS_SECRET_ACCESS_KEY</code> or <code>AWS_SECRET_KEY</code> or <code>EC2_SECRET_KEY</code>, <code>AWS_SECURITY_TOKEN</code> or <code>EC2_SECURITY_TOKEN</code>, <code>AWS_REGION</code> or <code>EC2_REGION</code>
</li> <li>Ansible uses the boto configuration file (typically ~/.boto) if no credentials are provided. See <a class="reference external" href="http://boto.readthedocs.org/en/latest/boto_config_tut.html" target="_blank">http://boto.readthedocs.org/en/latest/boto_config_tut.html</a>
</li> <li>
<code>AWS_REGION</code> or <code>EC2_REGION</code> can be typically be used to specify the AWS region, when required, but this can also be configured in the boto config file</li> </ul> </div>  <h3 id="status">Status</h3> <p>This module is flagged as <strong>preview</strong> which means that it is not guaranteed to have a backwards compatible interface.</p> <p>For help in developing on modules, should you be so inclined, please read <a class="reference internal" href="https://docs.ansible.com/ansible/latest/community.html" target="_blank"><span class="doc">Community Information &amp; Contributing</span></a>, <a class="reference internal" href="../dev_guide/testing/"><span class="doc">Testing Ansible</span></a> and <a class="reference internal" href="../dev_guide/developing_modules/"><span class="doc">Developing Modules</span></a>.</p>
<div class="_attribution">
  <p class="_attribution-p">
    © 2012–2017 Michael DeHaan<br>© 2017 Red Hat, Inc.<br>Licensed under the GNU General Public License version 3.<br>
    <a href="https://docs.ansible.com/ansible/latest/elb_target_group_module.html" class="_attribution-link" target="_blank">https://docs.ansible.com/ansible/latest/elb_target_group_module.html</a>
  </p>
</div>

			</div>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
