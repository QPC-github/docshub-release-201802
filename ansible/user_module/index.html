
<!DOCTYPE HTML>

<html lang="en">

<head>
  <meta charset="utf-8">
  <title>User - Ansible - W3cubDocs</title>
  
  <meta name="description" content=" Note ">
  <meta name="keywords" content="user, -, manage, accounts, ansible">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="http://docs.w3cub.com/ansible/user_module/">
  <link href="/favicon.png" rel="icon">
  <link type="text/css" rel="stylesheet" href="/assets/application-e0f881b0fce8cbe96f33dadc355b7159d5d2912911231446d60eb8f9caffa802.css">
  <script type="text/javascript" src="/assets/application-8fc46316434047265cd383f02b8e7f434ed7dec4a59f920dd633deef8d488d1b.js"></script>
  <script src="/json/ansible.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body>
	<div class="_app">
	<header class="_header">
  
  <form class="_search">
    <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
    <a class="_search-clear"></a>
    <div class="_search-tag"></div>
  </form>
  
  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/ansible/" class="_nav-link" title="" style="margin-left:0;">Ansible</a></span>
  
  <nav class="_nav">
    <a href="/app/" class="_nav-link ">App</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		<div class="_list">
			
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<div class="_page _sphinx">
				
<h1 id="user">user - Manage user accounts</h1>  <ul class="simple" id="user-manage-user-accounts"> <li><a class="reference internal" href="#synopsis" id="id1">Synopsis</a></li> <li><a class="reference internal" href="#options" id="id2">Options</a></li> <li><a class="reference internal" href="#examples" id="id3">Examples</a></li> <li>
<a class="reference internal" href="#notes" id="id4">Notes</a><ul> <li><a class="reference internal" href="#status" id="id5">Status</a></li> <li><a class="reference internal" href="#maintenance-info" id="id6">Maintenance Info</a></li> </ul> </li> </ul>   <h2 id="synopsis">Synopsis</h2> <ul class="simple"> <li>Manage user accounts and user attributes.</li> <li>For Windows targets, use the <a class="reference internal" href="../win_user_module/#win-user"><span class="std std-ref">win_user</span></a> module instead.</li> </ul>   <h2 id="options">Options</h2> <table> <tr> <th class="head">parameter</th> <th class="head">required</th> <th class="head">default</th> <th class="head">choices</th> <th class="head">comments</th> </tr> <tr> <td>append<br>
</td> <td>no</td> <td>no</td> <td><ul>
<li>yes</li>
<li>no</li>
</ul></td> <td> <div>If <code>yes</code>, will only add groups, not set them to just the list in <em>groups</em>.</div> </td> </tr> <tr> <td>comment<br>
</td> <td>no</td> <td></td> <td></td> <td> <div>Optionally sets the description (aka <em>GECOS</em>) of user account.</div> </td> </tr> <tr> <td>createhome<br>
</td> <td>no</td> <td>yes</td> <td><ul>
<li>yes</li>
<li>no</li>
</ul></td> <td> <div>Unless set to <code>no</code>, a home directory will be made for the user when the account is created or if the home directory does not exist.</div> </td> </tr> <tr> <td>expires<br><div style="font-size: small;">(added in 1.9)</div>
</td> <td>no</td> <td>None</td> <td></td> <td> <div>An expiry time for the user in epoch, it will be ignored on platforms that do not support this. Currently supported on Linux and FreeBSD.</div> </td> </tr> <tr> <td>force<br>
</td> <td>no</td> <td>no</td> <td><ul>
<li>yes</li>
<li>no</li>
</ul></td> <td> <div>When used with <code>state=absent</code>, behavior is as with <code>userdel --force</code>.</div> </td> </tr> <tr> <td>generate_ssh_key<br>
</td> <td>no</td> <td>no</td> <td><ul>
<li>yes</li>
<li>no</li>
</ul></td> <td> <div>Whether to generate a SSH key for the user in question. This will <b>not</b> overwrite an existing SSH key.</div> </td> </tr> <tr> <td>group<br>
</td> <td>no</td> <td></td> <td></td> <td> <div>Optionally sets the user's primary group (takes a group name).</div> </td> </tr> <tr> <td>groups<br>
</td> <td>no</td> <td></td> <td></td> <td> <div>Puts the user in list of groups. When set to the empty string ('groups='), the user is removed from all groups except the primary group.</div> <div>Before version 2.3, the only input format allowed was a 'comma separated string', now it should be able to accept YAML lists also.</div> </td> </tr> <tr> <td>home<br>
</td> <td>no</td> <td></td> <td></td> <td> <div>Optionally set the user's home directory.</div> </td> </tr> <tr> <td>local<br><div style="font-size: small;">(added in 2.4)</div>
</td> <td>no</td> <td>False</td> <td></td> <td> <div>Forces the use of "local" command alternatives on platforms that implement it. This is useful in environments that use centralized authentification when you want to manipulate the local users. I.E. it uses `luseradd` instead of `useradd`.</div> <div>This requires that these commands exist on the targeted host, otherwise it will be a fatal error.</div> </td> </tr> <tr> <td>login_class<br>
</td> <td>no</td> <td></td> <td></td> <td> <div>Optionally sets the user's login class for FreeBSD, OpenBSD and NetBSD systems.</div> </td> </tr> <tr> <td>move_home<br>
</td> <td>no</td> <td>no</td> <td><ul>
<li>yes</li>
<li>no</li>
</ul></td> <td> <div>If set to <code>yes</code> when used with <code>home=</code>, attempt to move the user's home directory to the specified directory if it isn't there already.</div> </td> </tr> <tr> <td>name<br>
</td> <td>yes</td> <td></td> <td></td> <td> <div>Name of the user to create, remove or modify.</div> <div style="font-size: small;">aliases: user</div> </td> </tr> <tr> <td>non_unique<br>
</td> <td>no</td> <td>no</td> <td><ul>
<li>yes</li>
<li>no</li>
</ul></td> <td> <div>Optionally when used with the -u option, this option allows to change the user ID to a non-unique value.</div> </td> </tr> <tr> <td>password<br>
</td> <td>no</td> <td></td> <td></td> <td> <div>Optionally set the user's password to this crypted value. See the user example in the github examples directory for what this looks like in a playbook. See <a href="http://docs.ansible.com/ansible/faq.html#how-do-i-generate-crypted-passwords-for-the-user-module" target="_blank">http://docs.ansible.com/ansible/faq.html#how-do-i-generate-crypted-passwords-for-the-user-module</a> for details on various ways to generate these password values. Note on Darwin system, this value has to be cleartext. Beware of security issues.</div> </td> </tr> <tr> <td>remove<br>
</td> <td>no</td> <td>no</td> <td><ul>
<li>yes</li>
<li>no</li>
</ul></td> <td> <div>When used with <code>state=absent</code>, behavior is as with <code>userdel --remove</code>.</div> </td> </tr> <tr> <td>seuser<br><div style="font-size: small;">(added in 2.1)</div>
</td> <td>no</td> <td></td> <td></td> <td> <div>Optionally sets the seuser type (user_u) on selinux enabled systems.</div> </td> </tr> <tr> <td>shell<br>
</td> <td>no</td> <td></td> <td></td> <td> <div>Optionally set the user's shell.</div> </td> </tr> <tr> <td>skeleton<br><div style="font-size: small;">(added in 2.0)</div>
</td> <td>no</td> <td></td> <td></td> <td> <div>Optionally set a home skeleton directory. Requires createhome option!</div> </td> </tr> <tr> <td>ssh_key_bits<br>
</td> <td>no</td> <td>default set by ssh-keygen</td> <td></td> <td> <div>Optionally specify number of bits in SSH key to create.</div> </td> </tr> <tr> <td>ssh_key_comment<br>
</td> <td>no</td> <td>ansible-generated on $HOSTNAME</td> <td></td> <td> <div>Optionally define the comment for the SSH key.</div> </td> </tr> <tr> <td>ssh_key_file<br>
</td> <td>no</td> <td>.ssh/id_rsa</td> <td></td> <td> <div>Optionally specify the SSH key filename. If this is a relative filename then it will be relative to the user's home directory.</div> </td> </tr> <tr> <td>ssh_key_passphrase<br>
</td> <td>no</td> <td></td> <td></td> <td> <div>Set a passphrase for the SSH key. If no passphrase is provided, the SSH key will default to having no passphrase.</div> </td> </tr> <tr> <td>ssh_key_type<br>
</td> <td>no</td> <td>rsa</td> <td></td> <td> <div>Optionally specify the type of SSH key to generate. Available SSH key types will depend on implementation present on target host.</div> </td> </tr> <tr> <td>state<br>
</td> <td>no</td> <td>present</td> <td><ul>
<li>present</li>
<li>absent</li>
</ul></td> <td> <div>Whether the account should exist or not, taking action if the state is different from what is stated.</div> </td> </tr> <tr> <td>system<br>
</td> <td>no</td> <td>no</td> <td><ul>
<li>yes</li>
<li>no</li>
</ul></td> <td> <div>When creating an account, setting this to <code>yes</code> makes the user a system account. This setting cannot be changed on existing users.</div> </td> </tr> <tr> <td>uid<br>
</td> <td>no</td> <td></td> <td></td> <td> <div>Optionally sets the <em>UID</em> of the user.</div> </td> </tr> <tr> <td>update_password<br><div style="font-size: small;">(added in 1.3)</div>
</td> <td>no</td> <td>always</td> <td><ul>
<li>always</li>
<li>on_create</li>
</ul></td> <td> <div>
<code>always</code> will update passwords if they differ. <code>on_create</code> will only set the password for newly created users.</div> </td> </tr> </table>   <h2 id="examples">Examples</h2>  <pre data-language="YAML"># Add the user 'johnd' with a specific uid and a primary group of 'admin'
- user:
    name: johnd
    comment: "John Doe"
    uid: 1040
    group: admin

# Add the user 'james' with a bash shell, appending the group 'admins' and 'developers' to the user's groups
- user:
    name: james
    shell: /bin/bash
    groups: admins,developers
    append: yes

# Remove the user 'johnd'
- user:
    name: johnd
    state: absent
    remove: yes

# Create a 2048-bit SSH key for user jsmith in ~jsmith/.ssh/id_rsa
- user:
    name: jsmith
    generate_ssh_key: yes
    ssh_key_bits: 2048
    ssh_key_file: .ssh/id_rsa

# added a consultant whose account you want to expire
- user:
    name: james18
    shell: /bin/zsh
    groups: developers
    expires: 1422403387
</pre>    <h2 id="notes">Notes</h2> <div class="admonition note"> <p class="first admonition-title">Note</p> <ul class="last simple"> <li>There are specific requirements per platform on user management utilities. However they generally come pre-installed with the system and Ansible will require they are present at runtime. If they are not, a descriptive error message will be shown.</li> <li>For Windows targets, use the <a class="reference internal" href="../win_user_module/#win-user"><span class="std std-ref">win_user</span></a> module instead.</li> </ul> </div>  <h3 id="status">Status</h3> <p>This module is flagged as <strong>stableinterface</strong> which means that the maintainers for this module guarantee that no backward incompatible interface changes will be made.</p>   <h3 id="maintenance-info">Maintenance Info</h3> <p>For more information about Red Hat’s this support of this module, please refer to this <code>knowledge base article&lt;https://access.redhat.com/articles/rhel-top-support-policies&gt;</code></p> <p>For help in developing on modules, should you be so inclined, please read <a class="reference internal" href="https://docs.ansible.com/ansible/latest/community.html" target="_blank"><span class="doc">Community Information &amp; Contributing</span></a>, <a class="reference internal" href="../dev_guide/testing/"><span class="doc">Testing Ansible</span></a> and <a class="reference internal" href="../dev_guide/developing_modules/"><span class="doc">Developing Modules</span></a>.</p>
<div class="_attribution">
  <p class="_attribution-p">
    © 2012–2017 Michael DeHaan<br>© 2017 Red Hat, Inc.<br>Licensed under the GNU General Public License version 3.<br>
    <a href="https://docs.ansible.com/ansible/latest/user_module.html" class="_attribution-link" target="_blank">https://docs.ansible.com/ansible/latest/user_module.html</a>
  </p>
</div>

			</div>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
