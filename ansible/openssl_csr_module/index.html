
<!DOCTYPE HTML>

<html lang="en">

<head>
  <meta charset="utf-8">
  <title>Openssl_csr - Ansible - W3cubDocs</title>
  
  <meta name="description" content=" New in version 2.4. ">
  <meta name="keywords" content="openssl, csr, -, generate, certificate, signing, request, ansible">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="http://docs.w3cub.com/ansible/openssl_csr_module/">
  <link href="/favicon.png" rel="icon">
  <link type="text/css" rel="stylesheet" href="/assets/application-e0f881b0fce8cbe96f33dadc355b7159d5d2912911231446d60eb8f9caffa802.css">
  <script type="text/javascript" src="/assets/application-8fc46316434047265cd383f02b8e7f434ed7dec4a59f920dd633deef8d488d1b.js"></script>
  <script src="/json/ansible.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body>
	<div class="_app">
	<header class="_header">
  
  <form class="_search">
    <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
    <a class="_search-clear"></a>
    <div class="_search-tag"></div>
  </form>
  
  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/ansible/" class="_nav-link" title="" style="margin-left:0;">Ansible</a></span>
  
  <nav class="_nav">
    <a href="/app/" class="_nav-link ">App</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		<div class="_list">
			
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<div class="_page _sphinx">
				
<h1 id="openssl-csr">openssl_csr - Generate OpenSSL Certificate Signing Request (CSR)</h1> <div class="versionadded" id="openssl-csr-generate-openssl-certificate-signing-request-csr"> <p><span class="versionmodified">New in version 2.4.</span></p> </div>  <ul class="simple"> <li><a class="reference internal" href="#synopsis" id="id1">Synopsis</a></li> <li><a class="reference internal" href="#requirements-on-host-that-executes-module" id="id2">Requirements (on host that executes module)</a></li> <li><a class="reference internal" href="#options" id="id3">Options</a></li> <li><a class="reference internal" href="#examples" id="id4">Examples</a></li> <li><a class="reference internal" href="#return-values" id="id5">Return Values</a></li> <li>
<a class="reference internal" href="#notes" id="id6">Notes</a><ul> <li><a class="reference internal" href="#status" id="id7">Status</a></li> </ul> </li> </ul>   <h2 id="synopsis">Synopsis</h2> <ul class="simple"> <li>This module allows one to (re)generate OpenSSL certificate signing requests. It uses the pyOpenSSL python library to interact with openssl. This module supports the subjectAltName as well as the keyUsage and extendedKeyUsage extensions. Note: At least one of common_name or subject_alt_name must be specified. This module uses file common arguments to specify generated file permissions.</li> </ul>   <h2 id="requirements-on-host-that-executes-module">Requirements (on host that executes module)</h2>  <ul class="simple"> <li>python-pyOpenSSL</li> </ul>    <h2 id="options">Options</h2> <table> <tr> <th class="head">parameter</th> <th class="head">required</th> <th class="head">default</th> <th class="head">choices</th> <th class="head">comments</th> </tr> <tr> <td>common_name<br>
</td> <td>no</td> <td></td> <td></td> <td> <div>commonName field of the certificate signing request subject</div> <div style="font-size: small;">aliases: CN, commonName</div> </td> </tr> <tr> <td>country_name<br>
</td> <td>no</td> <td></td> <td></td> <td> <div>countryName field of the certificate signing request subject</div> <div style="font-size: small;">aliases: C, countryName</div> </td> </tr> <tr> <td>digest<br>
</td> <td>no</td> <td>sha256</td> <td></td> <td> <div>Digest used when signing the certificate signing request with the private key</div> </td> </tr> <tr> <td>email_address<br>
</td> <td>no</td> <td></td> <td></td> <td> <div>emailAddress field of the certificate signing request subject</div> <div style="font-size: small;">aliases: E, emailAddress</div> </td> </tr> <tr> <td>extended_key_usage<br>
</td> <td>no</td> <td></td> <td></td> <td> <div>Additional restrictions (e.g. client authentication, server authentication) on the allowed purposes for which the public key may be used.</div> <div>This can either be a 'comma separated string' or a YAML list.</div> <div style="font-size: small;">aliases: extKeyUsage, extendedKeyUsage</div> </td> </tr> <tr> <td>extended_key_usage_critical<br>
</td> <td>no</td> <td></td> <td></td> <td> <div>Should the extkeyUsage extension be considered as critical</div> <div style="font-size: small;">aliases: extKeyUsage_critical, extendedKeyUsage_critical</div> </td> </tr> <tr> <td>force<br>
</td> <td>no</td> <td></td> <td><ul>
<li>True</li>
<li>False</li>
</ul></td> <td> <div>Should the certificate signing request be forced regenerated by this ansible module</div> </td> </tr> <tr> <td>key_usage<br>
</td> <td>no</td> <td></td> <td></td> <td> <div>This defines the purpose (e.g. encipherment, signature, certificate signing) of the key contained in the certificate.</div> <div>This can either be a 'comma separated string' or a YAML list.</div> <div style="font-size: small;">aliases: keyUsage</div> </td> </tr> <tr> <td>key_usage_critical<br>
</td> <td>no</td> <td></td> <td></td> <td> <div>Should the keyUsage extension be considered as critical</div> <div style="font-size: small;">aliases: keyUsage_critical</div> </td> </tr> <tr> <td>locality_name<br>
</td> <td>no</td> <td></td> <td></td> <td> <div>localityName field of the certificate signing request subject</div> <div style="font-size: small;">aliases: L, localityName</div> </td> </tr> <tr> <td>organization_name<br>
</td> <td>no</td> <td></td> <td></td> <td> <div>organizationName field of the certificate signing request subject</div> <div style="font-size: small;">aliases: O, organizationName</div> </td> </tr> <tr> <td>organizational_unit_name<br>
</td> <td>no</td> <td></td> <td></td> <td> <div>organizationalUnitName field of the certificate signing request subject</div> <div style="font-size: small;">aliases: OU, organizationalUnitName</div> </td> </tr> <tr> <td>path<br>
</td> <td>yes</td> <td></td> <td></td> <td> <div>Name of the folder in which the generated OpenSSL certificate signing request will be written</div> </td> </tr> <tr> <td>privatekey_passphrase<br>
</td> <td>no</td> <td></td> <td></td> <td> <div>The passphrase for the privatekey.</div> </td> </tr> <tr> <td>privatekey_path<br>
</td> <td>yes</td> <td></td> <td></td> <td> <div>Path to the privatekey to use when signing the certificate signing request</div> </td> </tr> <tr> <td>state<br>
</td> <td>no</td> <td>present</td> <td><ul>
<li>present</li>
<li>absent</li>
</ul></td> <td> <div>Whether the certificate signing request should exist or not, taking action if the state is different from what is stated.</div> </td> </tr> <tr> <td>state_or_province_name<br>
</td> <td>no</td> <td></td> <td></td> <td> <div>stateOrProvinceName field of the certificate signing request subject</div> <div style="font-size: small;">aliases: ST, stateOrProvinceName</div> </td> </tr> <tr> <td>subject_alt_name<br>
</td> <td>no</td> <td></td> <td></td> <td> <div>SAN extension to attach to the certificate signing request</div> <div>This can either be a 'comma separated string' or a YAML list.</div> <div style="font-size: small;">aliases: subjectAltName</div> </td> </tr> <tr> <td>subject_alt_name_critical<br>
</td> <td>no</td> <td></td> <td></td> <td> <div>Should the subjectAltName extension be considered as critical</div> <div style="font-size: small;">aliases: subjectAltName_critical</div> </td> </tr> <tr> <td>version<br>
</td> <td>no</td> <td>3</td> <td></td> <td> <div>Version of the certificate signing request</div> </td> </tr> </table>   <h2 id="examples">Examples</h2>  <pre data-language="YAML"># Generate an OpenSSL Certificate Signing Request
- openssl_csr:
    path: /etc/ssl/csr/www.ansible.com.csr
    privatekey_path: /etc/ssl/private/ansible.com.pem
    common_name: www.ansible.com

# Generate an OpenSSL Certificate Signing Request with a
# passphrase protected private key
- openssl_csr:
    path: /etc/ssl/csr/www.ansible.com.csr
    privatekey_path: /etc/ssl/private/ansible.com.pem
    privatekey_passphrase: ansible
    common_name: www.ansible.com

# Generate an OpenSSL Certificate Signing Request with Subject information
- openssl_csr:
    path: /etc/ssl/csr/www.ansible.com.csr
    privatekey_path: /etc/ssl/private/ansible.com.pem
    country_name: FR
    organization_name: Ansible
    email_address: jdoe@ansible.com
    common_name: www.ansible.com

# Generate an OpenSSL Certificate Signing Request with subjectAltName extension
- openssl_csr:
    path: /etc/ssl/csr/www.ansible.com.csr
    privatekey_path: /etc/ssl/private/ansible.com.pem
    subject_alt_name: 'DNS:www.ansible.com,DNS:m.ansible.com'

# Force re-generate an OpenSSL Certificate Signing Request
- openssl_csr:
    path: /etc/ssl/csr/www.ansible.com.csr
    privatekey_path: /etc/ssl/private/ansible.com.pem
    force: True
    common_name: www.ansible.com

# Generate an OpenSSL Certificate Signing Request with special key usages
- openssl_csr:
    path: /etc/ssl/csr/www.ansible.com.csr
    privatekey_path: /etc/ssl/private/ansible.com.pem
    common_name: www.ansible.com
    key_usage:
      - digitlaSignature
      - keyAgreement
    extended_key_usage:
      - clientAuth
</pre>    <h2 id="return-values">Return Values</h2> <p>Common return values are documented here <a class="reference internal" href="../common_return_values/"><span class="doc">Return Values</span></a>, the following are the fields unique to this module:</p> <table> <tr> <th class="head">name</th> <th class="head">description</th> <th class="head">returned</th> <th class="head">type</th> <th class="head">sample</th> </tr> <tr> <td>keyUsage</td> <td> <div>Purpose for which the public key may be used</div> </td> <td align="center">changed or success</td> <td align="center">list</td> <td align="center">['digitalSignature', 'keyAgreement']</td> </tr> <tr> <td>extendedKeyUsage</td> <td> <div>Additional restriction on the public key purposes</div> </td> <td align="center">changed or success</td> <td align="center">list</td> <td align="center">['clientAuth']</td> </tr> <tr> <td>subjectAltName</td> <td> <div>The alternative names this CSR is valid for</div> </td> <td align="center">changed or success</td> <td align="center">list</td> <td align="center">['DNS:www.ansible.com', 'DNS:m.ansible.com']</td> </tr> <tr> <td>subject</td> <td> <div>A dictionnary of the subject attached to the CSR</div> </td> <td align="center">changed or success</td> <td align="center">list</td> <td align="center">{'CN': 'www.ansible.com', 'O': 'Ansible'}</td> </tr> <tr> <td>privatekey</td> <td> <div>Path to the TLS/SSL private key the CSR was generated for</div> </td> <td align="center">changed or success</td> <td align="center">string</td> <td align="center">/etc/ssl/private/ansible.com.pem</td> </tr> <tr> <td>filename</td> <td> <div>Path to the generated Certificate Signing Request</div> </td> <td align="center">changed or success</td> <td align="center">string</td> <td align="center">/etc/ssl/csr/www.ansible.com.csr</td> </tr> </table>   <h2 id="notes">Notes</h2> <div class="admonition note"> <p class="first admonition-title">Note</p> <ul class="last simple"> <li>If the certificate signing request already exists it will be checked whether subjectAltName, keyUsage and extendedKeyUsage only contain the requested values and if the request was signed by the given private key</li> </ul> </div>  <h3 id="status">Status</h3> <p>This module is flagged as <strong>preview</strong> which means that it is not guaranteed to have a backwards compatible interface.</p> <p>For help in developing on modules, should you be so inclined, please read <a class="reference internal" href="https://docs.ansible.com/ansible/latest/community.html" target="_blank"><span class="doc">Community Information &amp; Contributing</span></a>, <a class="reference internal" href="../dev_guide/testing/"><span class="doc">Testing Ansible</span></a> and <a class="reference internal" href="../dev_guide/developing_modules/"><span class="doc">Developing Modules</span></a>.</p>
<div class="_attribution">
  <p class="_attribution-p">
    © 2012–2017 Michael DeHaan<br>© 2017 Red Hat, Inc.<br>Licensed under the GNU General Public License version 3.<br>
    <a href="https://docs.ansible.com/ansible/latest/openssl_csr_module.html" class="_attribution-link" target="_blank">https://docs.ansible.com/ansible/latest/openssl_csr_module.html</a>
  </p>
</div>

			</div>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
